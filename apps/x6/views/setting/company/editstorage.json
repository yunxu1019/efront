{"controller":" [\"$scope\", \"alert\", \"$timeout\", function ($scope,alert,$timeout){\r\n\t//\u83b7\u53d6\u76f4\u5c5e\u4ed3\u5e93\u5217\u8868\r\n\tvar point=0;\r\n\tapi(\"/x6/getZsckList.do\",{\r\n\t\tgsdm:$scope.data.gsdm,\r\n\t\tbm:$scope.data.bm,\r\n\t}).onsuccess(function(data){\r\n\t\t$scope.gridData=data.ckList;\r\n\t})\r\n\t///\r\n\t$scope.newBase={\r\n\t\tname:\"\",\r\n\t\tzc:true,\r\n\t\tshc:false\r\n\t}\r\n\t//\u65b0\u589e\u4ed3\u5e93\r\n\t$scope.addStorage=function(){\r\n\t\tif(!$scope.newBase.name){\r\n\t\t\talert.warn(\"\u4ed3\u5e93\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a!\")\r\n\t\t}else{\r\n\t\t\tvar rows=[];\r\n\t\t\trows.push({\r\n\t\t\t\tid:-1,\r\n\t\t\t\tname:$scope.newBase.name,\r\n\t\t\t\tcj:2,\r\n\t\t\t\tpbm:$scope.data.bm\r\n\t\t\t});\r\n\t\t\tif($scope.newBase.zc){\r\n\t\t\t\trows[0].nblx=\"\u603b\u4ed3\"\r\n\t\t\t}else{\r\n\t\t\t\trows[0].nblx=\"\u552e\u540e\u4ed3\"\r\n\t\t\t}\r\n\t\t\t//console.log(rows)\r\n\t\t\tapi(\"/x6/saveCkxx.do\",{rows:rows}).onsuccess(function(data){\r\n\t\t\t\tif(data.result==\"ok\"){\r\n\t\t\t\t\talert.success(\"\u65b0\u589e\u6210\u529f\");\r\n\t\t\t\t\t$scope.gridData.push(data.ckList[0]);\r\n\t\t\t\t\t$scope.newBase={\r\n\t\t\t\t\t\tname:\"\",\r\n\t\t\t\t\t\tzc:true,\r\n\t\t\t\t\t\tshc:false\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\talert.warn(data.message)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t//$scope.gridData.push(temp);\r\n\t\t}\r\n//\t\tvar base={\r\n//\t\t\tid:-1,\r\n//\t\t\tname:name,\r\n//\t\t\tnblx:\"\u603b\u4ed3\",\r\n//\t\t\tpbm:$scope.data.bm,\r\n//\t\t\tcj:2\r\n//\t\t}\r\n\t\t//$scope.gridData.push()\r\n\t\t//console.log($scope.gridData)\r\n\t}\r\n\t\r\n\t$scope.removeRow=function(obj){\r\n\t\tvar rownum;\r\n\t\tfor(var i=0;i<$scope.gridData.length;i++){\r\n\t\t\tif($scope.gridData[i].id==obj.id){\r\n\t\t\t\trownum=i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tapi(\"/x6/deleteGsxx.do\",obj).onsuccess(function(data){\r\n\t\t\tif(data.result==\"ok\"){\r\n\t\t\t\talert.success(\"\u5220\u9664\u6210\u529f\");\r\n\t\t\t\r\n\t\t\t\t$scope.gridData.splice(rownum,1);\r\n\t\t\r\n\t\t\t}else{\r\n\t\t\t\talert.warn(data.message);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t\r\n\t$scope.$ViewOptions={\t\r\n        \"\u5173\u95ed\":function(){           \r\n        \r\n        }\r\n    }\r\n\t\r\n\t$scope.$watch(\"gridData\",function(){\r\n\t\tpoint++;\r\n\t\tif(point>2){\r\n\t\t\t$scope.$ViewOptions={\t\r\n\t\t\t\t\"\u4fdd\u5b58\":function(){\r\n\t\t\t\t\tfor(var i=0;i<$scope.gridData.length;i++){\r\n\t\t\t\t\t\tif(!$scope.gridData[i].name){\r\n\t\t\t\t\t\t\talert.warn(\"\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\");\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tapi(\"/x6/saveCkxx.do\",{rows:$scope.gridData}).onsuccess(function(data){\r\n\t\t\t\t        \t\tif(data.result==\"ok\"){\r\n\t\t\t\t        \t\t\talert.success(\"\u7f16\u8f91\u6210\u529f\");\r\n\t\t\t\t        \t\t\t$scope.gridData=data.ckList;\r\n\t\t\t\t   \r\n\t\t\t\t        \t\t}else{\r\n\t\t\t\t        \t\t\talert.warn(data.message);\r\n\t\t\t\t        \t\t\treturn false\r\n\t\t\t\t        \t\t}\r\n\t\t\t\t        \t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t        \t\r\n\t\t        \t\r\n\t\t        },\r\n\t\t        \"\u5173\u95ed\":function(){           \r\n\t\t        \r\n\t\t        }\r\n\t\t    }\r\n\t\t}\r\n\t},true);\r\n\t\r\n\t\r\n\t\r\n\t$scope.onlyRadio=function(type){\r\n\t\tif(type){\r\n\t\t\t$scope.newBase.zc=false;\r\n\t\t\t$scope.newBase.shc=true;\r\n\t\t}else{\r\n\t\t\t$scope.newBase.zc=true;\r\n\t\t\t$scope.newBase.shc=false;\r\n\t\t}\r\n\t}\r\n}]","template":"<style>.setting-company-editstorage .container {\n  width: 90%;\n  height: 200px;\n  margin: 0 auto;\n}\n.setting-company-editstorage .container > .container-head {\n  width: 100%;\n  height: 30px;\n  margin: 15px auto;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.setting-company-editstorage .container > .container-head > .text-input {\n  width: 37%;\n  margin: 0 10px;\n}\n.setting-company-editstorage .container > .container-head > .radio-div {\n  margin-left: 10px;\n}\n.setting-company-editstorage .container > .container-head > .anniu {\n  margin-left: 3%;\n  cursor: pointer;\n}\n.setting-company-editstorage .container > .container-head > .disabled {\n  position: relative;\n  z-index: -1;\n}\n.setting-company-editstorage .container > .container-storage {\n  width: 100%;\n  height: 220px;\n  box-sizing: border-box;\n  border-top: 1px solid #dfdfdf ;\n  border-left: 1px solid #dfdfdf ;\n  border-right: 1px solid #dfdfdf ;\n}\n</style><div class=\"container\">\r\n\t<div class=\"container-head\">\r\n\t\t<span>\u540d\u79f0:</span>\r\n\t\t<text-input ng-model=\"newBase.name\"></text-input>\r\n\t\t<span>\u4ed3\u5e93\u7c7b\u578b:</span>\r\n\t\t<div ng-click=\"onlyRadio(0)\" ng-class=\"{'radio-div':true,'disabled':zc}\"><radio ng-model=\"newBase.zc\"></radio></div>\r\n\t\t<label>\u603b\u4ed3</label>\r\n\t\t<div ng-click=\"onlyRadio(1)\" ng-class=\"{'radio-div':true,'disabled':shc}\"><radio ng-model=\"newBase.shc\"></radio></div>\r\n\t\t<label>\u552e\u540e\u4ed3</label>\r\n\t\t<anniu ng-click='addStorage()'>\u6dfb\u52a0</anniu>\r\n\t</div>\r\n\t<grid ng-model=\"gridData\" editable class=\"container-storage no-line\" ondrop=\"removeRow\">\r\n\t\t<DIV name=\"\u4ed3\u5e93\u540d\u79f0\" field=\"name\" ></DIV>\n\t\t<DIV name=\"\u4ed3\u5e93\u7c7b\u578b\" field=\"nblx\" format=\"translate:{1:'\u552e\u540e\u4ed3',0:'\u603b\u4ed3'}\"></DIV>\n\t</grid>\r\n</div>\r\n"}