{"controller":" [\"$scope\", \"views\", \"popup\", \"tasks\", \"api\", \"cache\", \"alert\", function ($scope, views,popup,tasks, api,cache,alert) {\r\n\t$scope.staff={};\r\n\t//\u7f16\u8f91\u5458\u5de5\u4fe1\u606f\r\n    $scope.onedit=function(){  \r\n    \t//console.log()\r\n        popup(\"/setting/info/staff_edit\",{\r\n            \"$ViewTitle\":\"\u7f16\u8f91\u5458\u5de5\u4fe1\u606f\",\r\n            \"$ViewOptions\":{\r\n                \"\u4fdd\u5b58\":function(){\r\n                \t\r\n                },\r\n                \"\u5173\u95ed\":function(){\r\n                    \r\n                }\r\n        }\r\n        },{width:648,height:684})\r\n    };\r\n    $scope.$on(\"$destroy\",function(){\r\n        console.log(tasks(),'tasks');\r\n    });\r\n    $scope.ondrop=function(){\r\n    };\r\n    $scope.filter = function () {\r\n        $scope.filter.ing = !$scope.filter.ing;\r\n    };\r\n    //\u65b0\u589e\u4e0e\u5458\u5de5\u4fe1\u606f\r\n    $scope.add = function () {\r\n\t\tpopup(\"/setting/info/staff_add\",{\r\n            \"$ViewTitle\":\"\u65b0\u589e\u5458\u5de5\u4fe1\u606f\",\r\n            \"$ViewOptions\":{\r\n                \"\u4fdd\u5b58\":function(){\r\n                \t\r\n                },\r\n                \"\u5173\u95ed\":function(){\r\n                    \r\n                }\r\n        }\r\n        },{width:648,height:684})\r\n    };\r\n\r\n    $scope.data = {\r\n        \u4e2d\u79d1\u9662\u7eb3\u7c73\u6240: {\r\n            \u4e00\u533a: [\r\n                \"\u6c5f\u82cf\",\r\n                \"\u6d59\u6c5f\"\r\n            ],\r\n            \u65e0\u9521\u4e2d\u5fc3: []\r\n        }\r\n    };\r\n    $scope.staffs = [\r\n\r\n    ];\r\n        \r\n    $scope.yxbz0=false;\r\n    $scope.yxbz1=false;\r\n    $scope.yxbz2=true;\r\n    $scope.qi0=function(yxbz){\r\n    \t$scope.yxbz1=false;\r\n    \t$scope.yxbz2=false;\r\n    \t$scope.getUserList(yxbz);\r\n    }\r\n    $scope.qi1=function(yxbz){\r\n    \t$scope.yxbz0=false;\r\n    \t$scope.yxbz2=false; \r\n    \t$scope.getUserList(yxbz);\r\n    }\r\n    $scope.qi2=function(yxbz){   \t\r\n    \t$scope.yxbz0=false;\r\n    \t$scope.yxbz1=false;\t  \r\n    \t$scope.getUserList(yxbz);\r\n    }\r\n    //\u5458\u5de5\u5217\u8868\r\n    //console.log(cache);\r\n    $scope.getUserList=function(yxbz){\r\n    \t$scope.staffs=[];\r\n    \tvar params = {\r\n            yxbz:yxbz\r\n        };\r\n        api('/x6/loadUserList.do', params).onsuccess(function (data) {        \t          \r\n            var list=data.userList;            \r\n            for(var i=0;i<list.length;i++){\r\n            \tlist[i].gereninf=list[i].name+\" \"+list[i].phone;\r\n            \tlist[i].zaizhi=list[i].yxbz==0?'\u5728\u804c':'\u79bb\u804c';\r\n            \tlist[i].quanxian=list[i].allowlogin==0?'\u4e0d\u5141\u8bb8':'\u5141\u8bb8';           \t\r\n            \t$scope.staffs.push(list[i]);            \t\r\n            }\r\n        });\r\n    }\r\n    $scope.getUserList(2);\r\n    //\u7f16\u8f91\u4e2a\u4eba\u4fe1\u606f\r\n    $scope.edit=function($,$data){\r\n    \tconsole.log($);\r\n    \t\r\n    }\r\n\t//\u6279\u91cf\u8bbe\u7f6e\r\n    $scope.shtop=0;\r\n    $scope.checked=[];\r\n    var setArray=[];\r\n    $scope.fn=function(){\r\n    \t\r\n    \t$scope.shtop=1;\r\n    \t$scope.chooseNum=$scope.checked.length;\r\n    \tif($scope.checked.length==$scope.staffs.length){\r\n    \t\tsetArray=$scope.checked;\r\n    \t}else{\r\n    \t\tvar indexs=[];\r\n\t    \tsetArray=[];\r\n\t    \tfor(var i=0;i<$scope.checked.length;i++){\r\n\t    \t\tindexs.push($scope.checked[i])\r\n\t    \t}\r\n\t    \tfor(var i=0;i<indexs.length;i++){    \t\t\r\n\t    \t\tsetArray.push($scope.staffs[indexs[i]]);\r\n\t    \t}\r\n    \t}   \t   \t\r\n    }\r\n    \r\n    $scope.showCancel=function(){\r\n    \t$scope.shtop=0;\r\n    }\r\n    //\u663e\u793a\u5b89\u5168\u8bbe\u7f6e\r\n    $scope.displayOption=function(){\r\n    \tif(!$scope.xsoption){\r\n    \t\t$scope.xsoption=false;\r\n    \t}    \t\r\n    \t$scope.xsoption=$scope.xsoption==false? true: false;\r\n    }\r\n    \r\n    //\u4fdd\u5b58\u5b89\u5168\u8bbe\u7f6e \u6279\u91cf\u4fee\u6539\u6743\u9650   \r\n    $scope.staff.cbjm=0;\r\n    $scope.staff.dy=0;\r\n    $scope.staff.dc=0;\r\n    $scope.confirm=function(){    \t\r\n    \t//alert($scope.staff.cxts);\r\n    \t//console.log(setArray);\r\n    \tif(!$scope.staff.cxts){\r\n    \t\t$scope.staff.cxts=0;\r\n    \t}\r\n    \t$scope.staff.iscbjm=$scope.staff.cbjm==true?1:0;\r\n    \t$scope.staff.isdc=$scope.staff.dc==true?1:0;\r\n\t    $scope.staff.isdy=$scope.staff.dy==true?1:0;\r\n    \tvar flags={\r\n\t    \t\"dc\":$scope.staff.isdc,\r\n\t    \t\"dy\":$scope.staff.isdy,\r\n\t    \t\"cxts\":$scope.staff.cxts\r\n\t    }\r\n    \tvar idsArray=[];\r\n    \tfor(var i=0;i<setArray.length;i++){\r\n    \t\tidsArray.push(setArray[i].id);\r\n    \t}    \t\r\n    \tvar params={\r\n    \t\tids:idsArray.join(),\r\n    \t\tiscbjm:$scope.staff.iscbjm,\r\n    \t\tflags:flags\r\n    \t}   \t\r\n    \tapi('/x6/updateQxBatch.do', params).onsuccess(function (data) {  \r\n\t       \tif(data.result==\"ok\"){\r\n\t\t\t\talert.success(\"\u8bbe\u7f6e\u6210\u529f\");\r\n\t\t\t}else{\r\n\t\t\t\talert.warn(data.message);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t    });\r\n    }\r\n    //\u6279\u91cf\u5220\u9664    \r\n    $scope.bachDelete=function(){\r\n    \tvar idsArray=[];\r\n    \tfor(var i=0;i<setArray.length;i++){\r\n    \t\tidsArray.push(setArray[i].id);\r\n    \t}\r\n    \tvar params={\r\n    \t\tids:idsArray.join()\r\n    \t}\r\n    \tapi('/x6/deleteUserBatch.do', params).onsuccess(function (data) {  \r\n\t       \tif(data.result==\"ok\"){\r\n\t\t\t\talert.success(\"\u5220\u9664\u6210\u529f\");\r\n\t\t\t\t$scope.getUserList(2);\r\n\t\t\t}else{\r\n\t\t\t\talert.warn(data.message);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t    });\r\n    } \r\n    //\u5f00\u901a\u65b0\u5458\u5de5\r\n    $scope.openNewyg=function(){\r\n    \tvar idsArray=[];\r\n    \tfor(var i=0;i<setArray.length;i++){\r\n    \t\tidsArray.push(setArray[i].id);\r\n    \t}\r\n    \tvar params={\r\n    \t\tids:idsArray.join()\r\n    \t}\r\n    \tapi('/x6/ckectUserBatch.do', params).onsuccess(function (data) {  \r\n\t       \tif(data.result==\"ok\"){\r\n\t\t\t\talert.success(\"\u5f00\u901a\u6210\u529f\");\r\n\t\t\t\t$scope.getUserList(2);\r\n\t\t\t}else{\r\n\t\t\t\talert.warn(data.message);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t    });\r\n    }\r\n}]"}