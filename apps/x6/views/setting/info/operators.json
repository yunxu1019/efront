{"controller":"[\"$scope\", \"alert\", \"cache\", \"$filter\", \"tips\", \"loading\", function($scope,alert,cache,$filter,tips,loading){\r\n\t//loading\r\n\tloading.bubble();\r\n\t//\u83b7\u53d6\u8fd0\u8425\u5546\u5217\u8868\r\n\t$scope.yyslist=$filter(\"yysfilter\")(cache.dmjgList,3);\r\n\t$scope.qyValue={\r\n\t\tqy:1,\r\n\t\tnoqy:0\r\n\t}\r\n\t//\u5148\u628a\u5df2\u542f\u7528\u548c\u672a\u542f\u7528\u7684\u8bf7\u6c42\u56de\u6765\r\n\tvar qylist;\r\n\tvar noqylist;\r\n\tapi(\"/x6/getDmTclxList.do\",{\r\n\t\tyxbz:0\r\n\t}).onsuccess(function(data){\r\n        qylist=data.tclxList;\r\n        $scope.tclist=qylist;\r\n        api(\"/x6/getDmTclxList.do\",{\r\n            yxbz:1\r\n        }).onsuccess(function(data){\r\n            noqylist=data.tclxList;\r\n            loading.bubbleEnd(1000);\r\n        })\r\n\t})\r\n\r\n\r\n\t//\u9009\u62e9\u542f\u7528/\u4e0d\u542f\u7528\r\n\t$scope.isqy=function () {\r\n        $scope.tclist=[];\r\n\t\tif($scope.qyValue.qy&&$scope.qyValue.noqy){\r\n            $scope.tclist=$scope.tclist.concat(qylist,noqylist);\r\n\t\t}else if($scope.qyValue.qy&&!$scope.qyValue.noqy){\r\n            $scope.tclist=qylist;\r\n\t\t}else if(!$scope.qyValue.qy&&$scope.qyValue.noqy){\r\n            $scope.tclist=noqylist;\r\n\t\t}else{\r\n            $scope.tclist=[];\r\n\t\t}\r\n    }\r\n\r\n\r\n\r\n\r\n\t$scope.add=function(){\r\n    \tvar addMain=document.getElementById(\"addMain\");\r\n    \taddMain.style.maxHeight='500px';\r\n   }\r\n\r\n\t//$scope.yysname=['\u4e2d\u56fd\u7535\u5f71','\u4e2d\u56fd\u79fb\u52a8','\u4e2d\u56fd\u8054\u901a'];\r\n\r\n\t$scope.addRow=function(){\r\n\t\tpopup('/setting/info/operators_add',{\r\n\t\t\t'$ViewTitle':'\u65b0\u589e\u8fd0\u8425\u5546\u4fe1\u606f',\r\n\t\t\t'$ViewOptions':{\r\n\t                \"\u4fdd\u5b58\":function(close){\r\n\t                    return false;\r\n\t                },\r\n\t                \"\u5173\u95ed\":function(){\r\n\t                    //return false;\r\n\t                }\r\n\t           },\r\n\t\t    data:{\r\n\t\t\t\tlist:$scope.yyslist,\r\n\t\t\t\ttc:$scope.tclist\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\twidth:'400px',\r\n\t\t\theight:'280px'\r\n\t\t})\r\n\t}\r\n\t$scope.editRow=function(value){\r\n\t\tpopup('/setting/info/operators_edit',{\r\n\t\t\t'$ViewTitle':'\u7f16\u8f91\u8fd0\u8425\u5546\u4fe1\u606f',\r\n\t\t\t'$ViewOptions':{\r\n\t                \"\u4fdd\u5b58\":function(close){\r\n\t                    return false;\r\n\t                },\r\n\t                \"\u5173\u95ed\":function(){\r\n\t                    //return false;\r\n\t                }\r\n\t            },\r\n\t\t\tdata:{\r\n\t\t\t\ttc:value,\r\n\t\t\t\tlist:$scope.yyslist\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\twidth:'400px',\r\n\t\t\theight:'280px'\r\n\t\t})\r\n\t}\r\n\t$scope.delTc=function(){\r\n        alert(\"\u6d88\u606f\",\"\u786e\u5b9a\u5220\u9664\u5417?\",{\r\n            '\u786e\u5b9a': function() {\r\n                var ids=[];\r\n                for(var i=0;i<$scope.checkedRow.length;i++){\r\n                    ids.push($scope.checkedRow[i].id)\r\n                }\r\n                api(\"/x6/deleteTclxBatch.do\",{\r\n                \tids:ids.join(\",\")\r\n\t\t\t\t}).onsuccess(function(data){\r\n\t\t\t\t\ttips.success(\"\u5220\u9664\u6210\u529f\")\r\n                    api(\"/x6/getDmTclxList.do\",{\r\n                        yxbz:$scope.yxbz\r\n                    }).onsuccess(function(data){\r\n\r\n                        for(var i=0;i<data.tclxList.length;i++){\r\n                            for(var j=0;j<$scope.yyslist.length;j++){\r\n                                if(data.tclxList[i].yysdm==$scope.yyslist[j].id){\r\n\r\n                                    data.tclxList[i].yysname=$scope.yyslist[j].name\r\n                                }\r\n                            }\r\n                        }\r\n                        $scope.tclist=data.tclxList;\r\n                    })\r\n\t\t\t\t})\r\n            },\r\n            '\u53d6\u6d88': function() {}\r\n        })\r\n\r\n\r\n\t}\r\n}]","template":"<style>.setting-info-operators ul,\n.setting-info-operators li {\n  list-style: none;\n}\n.setting-info-operators p {\n  margin: 0;\n}\n.setting-info-operators .operat-bar {\n  width: 200%;\n  height: 50px;\n  background-color: #f8f9fd;\n  position: relative;\n  text-align: right;\n  white-space: nowrap;\n  line-height: 50px;\n  overflow: hidden;\n  border-bottom: 2px solid #4385F3;\n}\n.setting-info-operators .operat-bar > div {\n  width: 50%;\n  height: 100%;\n  padding: 0 10px;\n  float: left;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.setting-info-operators .operat-bar > div > .check-div > .checkbox {\n  margin: 0 20px 0 0;\n  float: left;\n  height: 50px;\n}\n.setting-info-operators .operat-bar > div .anniu {\n  margin: 0 0 0 20px ;\n}\n.setting-info-operators .operat-bar > div .message {\n  color: #f06465;\n  position: absolute;\n  top: -15px;\n  right: 160px;\n}\n.setting-info-operators .operat-bar > div:first-child {\n  text-align: left;\n  font-size: 13px;\n}\n.setting-info-operators .operat-bar > div:first-child > em {\n  color: #8ba4bd;\n  margin: 0 20px;\n}\n.setting-info-operators .operat-bar > div:first-child > span {\n  color: #8ba4bd;\n  display: inline-block;\n  cursor: pointer;\n}\n.setting-info-operators .operat-bar > div:first-child > span > i {\n  margin-right: 9px;\n  -webkit-transform: scale(1.2);\n      -ms-transform: scale(1.2);\n          transform: scale(1.2);\n}\n.setting-info-operators .operat-bar > div:first-child > span:hover {\n  color: #4385F3;\n}\n.setting-info-operators .operat-bar > div:first-child > .long {\n  font-size: 18px;\n  color: #4385F3;\n  margin: 0 5px;\n}\n.setting-info-operators .operat-bar > div:first-child > span:last-child > i {\n  vertical-align: top;\n}\n.setting-info-operators .operat-bar > div:first-child .anniu {\n  float: right;\n  margin-top: 12px;\n}\n.setting-info-operators .operat-bar > div:nth-child(2) {\n  text-align: left;\n  font-size: 13px;\n}\n.setting-info-operators .operat-bar > div:nth-child(2) > em {\n  color: #8ba4bd;\n  margin: 0 20px;\n}\n.setting-info-operators .operat-bar > div:nth-child(2) > span {\n  color: #8ba4bd;\n  display: inline-block;\n  cursor: pointer;\n}\n.setting-info-operators .operat-bar > div:nth-child(2) > span > i {\n  margin-right: 9px;\n  -webkit-transform: scale(1.2);\n      -ms-transform: scale(1.2);\n          transform: scale(1.2);\n}\n.setting-info-operators .operat-bar > div:nth-child(2) > span:hover {\n  color: #4385F3;\n}\n.setting-info-operators .operat-bar > div:nth-child(2) > .long {\n  font-size: 18px;\n  color: #4385F3;\n  margin: 0 5px;\n}\n.setting-info-operators .operat-bar > div:nth-child(2) > span:last-child > i {\n  vertical-align: top;\n}\n.setting-info-operators .contains {\n  width: -webkit-calc(100% - 20px);\n  width: calc(100% - 20px);\n  height: -webkit-calc(100% - 75px);\n  height: calc(100% - 75px);\n  margin: 10px auto;\n  border-top: 1px solid #e4e6ea ;\n  border-left: 1px solid #e4e6ea ;\n  border-right: 1px solid #e4e6ea ;\n  box-sizing: border-box;\n}\n.setting-info-operators .contains > .set-grid {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  border-bottom: 1px solid #e4e6ea ;\n  background: red;\n}\n.setting-info-operators .contains > .set-grid > .grid {\n  width: 100%;\n  height: 100%;\n}\n</style><div class=\"operat-bar\">\r\n\t<div class=\"slide-left\" ng-if=\"!checkedRow.length\">\r\n\t\t<div class=\"check-div\" ng-click=\"isqy()\"><checkbox ng-model=\"qyValue.qy\">\u5df2\u542f\u7528</checkbox></div>\r\n\t    <div class=\"check-div\" ng-click=\"isqy()\"><checkbox ng-model=\"qyValue.noqy\">\u672a\u542f\u7528</checkbox></div>\r\n\t    <anniu candidate ng-click=\"addRow()\">\u65b0\u589e</anniu>\r\n\t</div>\r\n\t<div class=\"slide-left\" ng-if=\"checkedRow.length\">\r\n\t\t\u5df2\u9009\u4e2d<span class=\"long\">{{checkedRow.length}}</span>\u9879<em>|</em>\r\n\t\t<span ng-click=\"delTc()\"><i class=\"iconfont icon-shanchu1\"></i>\u5220\u9664</span><em>|</em>\r\n\t\t\r\n\t\t<span><i class=\"iconfont icon-export\"></i>\u5bfc\u51fa</span>\r\n\t</div>\r\n\t\r\n</div>\r\n<div class=\"contains\">\r\n\t<div class=\"set-grid\">\r\n\t\t<grid ng-model='tclist' multi-select=\"true\" onedit=\"editRow\" show-filter=\"filter\"checked=\"checkedRow\" class=\"noline\">\r\n\t\t\t<DIV name=\"\u5957\u9910\u540d\u79f0\" field=\"name\"></DIV>\r\n\t\t\t<DIV name=\"\u8fd0\u8425\u5546\" field=\"yysdm\" format=\"cache:'dmjgList'\"></DIV>\r\n\t\t\t<DIV name=\"\u542f\u7528\u6807\u5fd7\" field=\"yxbz\" format=\"translate:{0:'\u5df2\u542f\u7528',1:'\u672a\u542f\u7528'}\"></DIV>\r\n\t\t\t<DIV name=\"\u5907\u6ce8\" field=\"comments\"></DIV>\r\n\t\t</grid>\r\n\t</div>\r\n</div>"}