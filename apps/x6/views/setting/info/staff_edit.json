{"controller":"[\"$scope\", \"views\", \"popup\", \"tasks\", \"api\", \"cache\", \"alert\", \"fileReader\", function($scope,views,popup,tasks, api,cache,alert,fileReader){\t\n    $scope.gsname=[];//\u516c\u53f8\n    $scope.gwname=[];//\u5c97\u4f4d\n    $scope.sex=[];//\u6027\u522b\n    $scope.allowname=[];//\u6743\u9650\n    $scope.zaizhistatus=[];//\u5728\u804c\u72b6\u6001\n    $scope.xlname=[];\n    var gsList=[];\n    var gwList=[]; \n    var id=-1;\n    $scope.sex=[\"\u7537\",\"\u5973\"];\n    $scope.allowname=[\"\u4e0d\u5141\u8bb8\",\"\u5141\u8bb8\"];\n    $scope.zaizhistatus=[\"\u5728\u804c\",\"\u79bb\u804c\"];\n    $scope.xlname=[\"\u7814\u7a76\u751f\",\"\u672c\u79d1\",\"\u5927\u4e13\"];\n    $scope.user={};\n    $scope.user.sexname=\"\u7537\";\n    $scope.user.allow=\"\u5141\u8bb8\"; \n    $scope.user.cbjm=0;\n    $scope.user.dy=0;\n    $scope.user.dc=0; \n    $scope.user.zaizhi0=true;\n    $scope.choosezaizhi0=function(){    \t\n    \t$scope.user.zaizhi1=false;\n    \t$scope.user.zaizhi0=true;  \n    \t$scope.user.zaizhi=\"\u5728\u804c\"\n    }\n    $scope.choosezaizhi1=function(){    \t\n    \t$scope.user.zaizhi0=false; \n    \t$scope.user.zaizhi1=true; \n    \t$scope.user.zaizhi=\"\u79bb\u804c\";\n    }\n    api('/x6/getXtGsList.do', {}).onsuccess(function (data) {          \n        gsList=data.gsList;\n        for(var i=0;i<gsList.length;i++){\n        \t$scope.gsname.push(gsList[i].name);       \t\n        }\n    })\n    api('/x6/loadGwxxList.do', {}).onsuccess(function (data) {          \n        gwList=data.gwxxList;\n        for(var i=0;i<gwList.length;i++){\n        \t$scope.gwname.push(gwList[i].name);       \t\n        }\n    })\n    \n    //\u83b7\u53d6\u5458\u5de5\u4fe1\u606f\n    var param={\n    \tgsdm:localStorage.gsdm,\n    \tuserId:localStorage.userid\n    }   \n    api('/x6/getUserInfo.do', param).onsuccess(function (data) {          \n        //console.log(data.userInfo);\n        id=data.userInfo.id;\n        $scope.user.list=data.userInfo; \n        $scope.user.name=data.userInfo.name;\n        $scope.user.gh=data.userInfo.bm;\n        $scope.user.dianhua=data.userInfo.phone;  \n        $scope.user.pic=data.userInfo.pic;\n        for(var i=0;i<gwList.length;i++){\n\t    \tif(data.userInfo.gwid==gwList[i].id){\n\t    \t\t$scope.user.gw=gwList[i].name;\n\t    \t\t$scope.user.list.gw=gwList[i].name;\n\t    \t}\n\t    } \n\t    for(var i=0;i<gsList.length;i++){\t    \t\n\t    \tif(data.userInfo.ssgsid==gsList[i].id){\n\t    \t\t$scope.user.gs=gsList[i].name;\n\t    \t\t$scope.user.list.gs=gsList[i].name;\n\t    \t}\n\t    }\n\t    $scope.user.rzrq=data.userInfo.rzrq;\t    \n\t    $scope.user.allow=$scope.user.allowlogin==1?\"\u5141\u8bb8\":\"\u4e0d\u5141\u8bb8\";\t   \n\t    $scope.user.sexname=$scope.user.sex==0?\"\u7537\":\"\u5973\";\n\t    $scope.user.csrq=data.userInfo.csrq;\n\t    $scope.user.sfzh=data.userInfo.sfzh;\n\t    $scope.user.xl=data.userInfo.xl;\n\t    $scope.user.pic=data.userInfo.userpic;\n\t    $scope.user.emai=data.userInfo.email;\n\t    if(data.userInfo.yxbz==0){\n\t    \t$scope.user.zaizhi0=true;\n\t    \t$scope.user.zaizhi1=false;\n\t    }else{\n\t    \t$scope.user.zaizhi0=false;\n\t    \t$scope.user.zaizhi1=true;\n\t    }\t    \n    })\n     \n    //\u7f16\u8f91\u4fdd\u5b58\n    $scope.save=function(){\n    \t    for(var i=0;i<gsList.length;i++){\n\t    \t\tif($scope.user.gs==gsList[i].name){\n\t    \t\t\t$scope.user.ssgsid=gsList[i].id;\n\t    \t\t}\n\t    \t}  \n\t    \tfor(var i=0;i<gwList.length;i++){\n\t    \t\tif($scope.user.gw==gwList[i].name){\n\t    \t\t\t$scope.user.gwid=gwList[i].id;\n\t    \t\t}\n\t    \t} \n\t    \t$scope.user.sex=$scope.user.sexname==\"\u7537\"?0:1;\n\t    \t$scope.user.allowlogin=$scope.user.allow==\"\u5141\u8bb8\"?1:0;\n\t    \t$scope.user.yxbz=$scope.user.zaizhi==\"\u5728\u804c\"?0:1;    \t\n\t    \t$scope.user.iscbjm=$scope.user.cbjm==true?1:0;\n\t    \t$scope.user.isdc=$scope.user.dc==true?1:0;\n\t    \t$scope.user.isdy=$scope.user.dy==true?1:0;\t    \t   \t\n\t    \tif(!$scope.user.cxts){\n\t    \t\t$scope.user.cxts=0;\n\t    \t}\n\t    \tvar flags={\n\t    \t\t\"dc\":$scope.user.isdc,\n\t    \t\t\"dy\":$scope.user.isdy,\n\t    \t\t\"cxts\":$scope.user.cxts\n\t    \t}\n\t    \tif(!$scope.user.name){\n\t\t\t\talert.success(\"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a\");\n\t\t\t\treturn false;\n\t\t\t}else if(!$scope.user.gh){\n\t\t\t\talert.success(\"\u5de5\u53f7\u4e0d\u80fd\u4e3a\u7a7a\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse if(!$scope.user.dianhua){\n\t\t\t\talert.success(\"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a\");\n\t\t\t\treturn false;\n\t\t\t}else if(!(/^1[34578]\\d{9}$/.test($scope.user.dianhua))){\n\t\t\t\talert.success(\"\u624b\u673a\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e\");\n\t\t\t\treturn false;\n\t\t\t}else if(!$scope.user.ssgsid){\n\t\t\t\talert.success(\"\u8bf7\u9009\u62e9\u90e8\u95e8\");\n\t\t\t\treturn false;\n\t\t\t}else if(!$scope.user.gwid){\n\t\t\t\talert.success(\"\u8bf7\u9009\u62e9\u5c97\u4f4d\");\n\t\t\t\treturn false;\n\t\t\t}else if(!$scope.user.rzrq){\n\t\t\t\talert.success(\"\u8bf7\u9009\u62e9\u5165\u804c\u65e5\u671f\");\n\t\t\t\treturn false;\n\t\t\t}else if(!$scope.user.csrq){\n\t\t\t\talert.success(\"\u8bf7\u9009\u62e9\u51fa\u751f\u65e5\u671f\");\n\t\t\t\treturn false;\n\t\t\t}else if(!$scope.user.xl){\n\t\t\t\talert.success(\"\u8bf7\u9009\u62e9\u5b66\u5386\");\n\t\t\t\treturn false;\n\t\t\t}else if(!$scope.user.sfzh){\n\t\t\t\talert.success(\"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7\");\n\t\t\t\treturn false;\n\t\t\t}else if(!(/(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/.test($scope.user.sfzh))){\n\t\t\t\talert.success(\"\u8eab\u4efd\u8bc1\u53f7\u683c\u5f0f\u9519\u8bef\");\n\t\t\t\treturn false;\n\t\t\t}else if(!$scope.user.emai){\n\t\t\t\talert.success(\"\u8bf7\u8f93\u5165\u90ae\u7bb1\");\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tvar params = {\t            \n\t\t            id:id,\n\t\t            userpic:$scope.user.picname,\n\t\t            ssgsid:$scope.user.ssgsid,\n\t\t            gwid:$scope.user.gwid,\n\t\t            name:$scope.user.name,\n\t\t            phone:$scope.user.dianhua,\n\t\t            bm:$scope.user.gh,\n\t\t            sex:$scope.user.sex,\n\t\t            allowlogin:$scope.user.allowlogin,\n\t\t            yxbz:$scope.user.yxbz,\n\t\t            iscbjm:$scope.user.iscbjm,\n\t\t            flags:flags,\n\t\t            rzrq:$scope.user.rzrq,\n\t\t            lzrq:\"\",\n\t\t\t\t\tsfzh:$scope.user.sfzh,\n\t\t            csrq:$scope.user.csrq,\n\t\t            xl:$scope.user.xl,\n\t\t            emai:$scope.user.emai\n\t\t        };\n\t\n\t\t        api('/x6/saveUserInfo.do', params).onsuccess(function (data) {  \t        \t\n\t\t        \tif(data.result==\"ok\"){\n\t\t\t\t\t\talert.success(\"\u7f16\u8f91\u6210\u529f\");\t\n\t\t\t\t\t\t$scope.xstc=false;\n\t\t\t\t\t}else{\n\t\t\t\t\t\talert.warn(data.message);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\t        \t\n\t\t        });\n\t\t\t}\t        \n    }\n    $scope.getFile = function() {\n\t\tfileReader.readAsDataUrl($scope.file, $scope)\n\t\t.then(function(result) { \n\t\t\tconsole.log(result)\n\t\t})\n\t}\n}]","template":"<style>.setting-info-staff_edit .editContainer {\n  position: absolute;\n  right: 12px;\n  top: 0;\n  bottom: 0;\n  background: #fff;\n  width: 100%;\n  z-index: 20;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);\n}\n.setting-info-staff_edit .editContainer > .close {\n  position: absolute;\n  right: 12px;\n  cursor: pointer;\n}\n.setting-info-staff_edit .editContainer > .edit-top {\n  padding: 20px 30px 0 30px;\n}\n.setting-info-staff_edit .editContainer > .edit-top > .title {\n  height: 30px;\n  line-height: 30px;\n  font-size: 14px;\n  padding-left: 20px;\n}\n.setting-info-staff_edit .editContainer > .edit-top > .title > img {\n  vertical-align: middle;\n  margin-right: 15px;\n}\n.setting-info-staff_edit .editContainer > .edit-top > .edit-content {\n  padding: 0 35px;\n}\n.setting-info-staff_edit .editContainer > .edit-top > .edit-content > .top-inf {\n  padding: 10px 40px;\n  display: inline-block;\n}\n.setting-info-staff_edit .editContainer > .edit-top > .edit-content > .top-inf > p:nth-child(1) {\n  color: #999;\n}\n.setting-info-staff_edit .editContainer > .jl {\n  background: #f2f4fa;\n  height: 10px;\n}\n.setting-info-staff_edit .editContainer > .edit-center {\n  padding: 20px 30px 0 30px;\n  border-bottom: 1px dashed  #e4e4e4;\n}\n.setting-info-staff_edit .editContainer > .edit-center > .title {\n  height: 30px;\n  line-height: 30px;\n  font-size: 14px;\n  padding-left: 20px;\n}\n.setting-info-staff_edit .editContainer > .edit-center > .title > img {\n  vertical-align: middle;\n  margin-right: 15px;\n}\n.setting-info-staff_edit .editContainer > .edit-center > .item > .field.comment {\n  width: 100%;\n  line-height: 30px;\n  padding-top: 20px;\n}\n.setting-info-staff_edit .editContainer > .edit-center > .item > .field.comment > span {\n  vertical-align: top;\n}\n.setting-info-staff_edit .editContainer > .edit-center > .item > .field.comment .text-input {\n  width: 497px;\n  height: 55px;\n  margin-left: 20px;\n}\n.setting-info-staff_edit .editContainer > .edit-center > .item > .field {\n  width: 286px;\n  line-height: 45px;\n  text-align: right;\n  font-size: 12px;\n  height: 45px;\n}\n.setting-info-staff_edit .editContainer > .edit-center > .item > .field .icon {\n  border-radius: 20%;\n  margin-left: 20px;\n  margin-right: 145px;\n  width: 40px;\n  height: 40px;\n  position: relative;\n  background-color: #26bf8c;\n}\n.setting-info-staff_edit .editContainer > .edit-center > .item > .field .icon > input {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  opacity: 0;\n  border: none;\n  outline: none;\n  display: block;\n}\n.setting-info-staff_edit .editContainer > .edit-center > .item > .field > * {\n  text-align: left;\n}\n.setting-info-staff_edit .editContainer > .edit-center > .item > .field > .radio {\n  display: inline-block;\n}\n.setting-info-staff_edit .editContainer > .edit-center > .item > .select {\n  padding: 10px;\n  margin-left: 45px;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom {\n  padding: 20px 30px 0 30px;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom > .title {\n  height: 30px;\n  line-height: 30px;\n  font-size: 14px;\n  padding-left: 20px;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom > .title > img {\n  vertical-align: middle;\n  margin-right: 15px;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom > .item > .field.comment {\n  width: 100%;\n  line-height: 30px;\n  padding-top: 20px;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom > .item > .field.comment > span {\n  vertical-align: top;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom > .item > .field.comment .text-input {\n  width: 497px;\n  height: 55px;\n  margin-left: 20px;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom > .item > .field {\n  width: 286px;\n  line-height: 45px;\n  text-align: right;\n  font-size: 12px;\n  height: 45px;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom > .item > .field .icon {\n  border-radius: 20%;\n  margin-left: 20px;\n  margin-right: 145px;\n  width: 40px;\n  height: 40px;\n  position: relative;\n  background-color: #26bf8c;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom > .item > .field .icon > input {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  opacity: 0;\n  border: none;\n  outline: none;\n  display: block;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom > .item > .field > * {\n  text-align: left;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom > .item > .field > .radio {\n  display: inline-block;\n}\n.setting-info-staff_edit .editContainer > .edit-bottom > .item > .select {\n  padding: 10px;\n  margin-left: 45px;\n}\n.setting-info-staff_edit .editContainer > .anniu {\n  margin: 40px;\n}\n</style>\t\n<div class=\"editContainer\">\n\t<a class=\"close\" ng-click=\"close()\"><i>\u2573</i></a>\n\t<div class=\"edit-top\">\n\t\t<div class=\"title\">\n       \t\t<img src=\"images/staff.png\" />\u5458\u5de5\n    \t</div>\n    \t<div class=\"edit-content\">\n    \t\t<div class=\"top-inf\">\n\t    \t\t<p>\u90e8\u95e8</p>\n\t    \t\t<p>{{user.list.gs}}</p>\n\t    \t</div>\n\t    \t<div class=\"top-inf\">\n\t    \t\t<p>\u5c97\u4f4d</p>\n\t    \t\t<p>{{user.list.gw}}</p>\n\t    \t</div>\n\t    \t<div class=\"top-inf\">\n\t    \t\t<p>\u624b\u673a</p>\n\t    \t\t<p>{{user.list.phone}}</p>\n\t    \t</div>\n\t    \t<div class=\"top-inf\">\n\t    \t\t<p>\u90ae\u7bb1</p>\n\t    \t\t<p>\u9500\u552e\u90e8</p>\n\t    \t</div>\n\t    \t<div class=\"top-inf\">\n\t    \t\t<p>\u521b\u5efa\u4eba</p>\n\t    \t\t<p>\u9500\u552e\u90e8</p>\n\t    \t</div>\n    \t</div>   \t\n\t</div>\n\t<div class=\"jl\"></div>\n\t<div class=\"edit-center\">\n\t\t<div class=\"title\">\n       \t\t<img src=\"images/gw.png\" />\u5c97\u4f4d\u4fe1\u606f\n    \t</div>\n    \t<div class=\"item\">    \t\t\n    \t\t<field name=\"\u5934\u50cf:\">        \t\n\t            <div icon=\"user.pic\" class=\"size48\"><input type=\"file\" file-model=\"myFile\" id=\"file-btn\"/></div>            \t\n\t        </field>\n\t        <P></P>\n\t        <field name=\"\u59d3\u540d:\"><text-input placeholder=\"\u8bf7\u8f93\u5165\u59d3\u540d\" ng-model=\"user.name\"></text-input></field>\n\t        <field name=\"\u5de5\u53f7:\"><text-input placeholder=\"\u8bf7\u8f93\u5165\u5de5\u53f7\" ng-model=\"user.gh\"></text-input></field>\n\t        <p></p>\n\t        <field name=\"\u624b\u673a:\"><text-input placeholder=\"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\" ng-model=\"user.dianhua\"></text-input></field>\n\t        <field name=\"\u90e8\u95e8:\"><selector empty-label=\"\u8bf7\u9009\u62e9\u90e8\u95e8\" ng-model='user.gs' source='gsname'></selector></field>\n\t        <p></p>\n\t        <field name=\"\u5c97\u4f4d:\"><selector empty-label=\"\u8bf7\u9009\u62e9\u5c97\u4f4d\" ng-model='user.gw' source='gwname'></selector></field>      \n\t        <field name=\"\u5728\u804c\u72b6\u6001:\">         \t\n\t        \t<!-- <selector ng-model='user.zaizhi' source='zaizhistatus'></selector> -->\n\t        \t<radio ng-model=\"user.zaizhi0\" ng-click=\"choosezaizhi0()\">\u5728\u804c</radio>\n        \t \t<radio ng-model=\"user.zaizhi1\" ng-click=\"choosezaizhi1()\">\u79bb\u804c</radio>\n\t        </field>\n\t        <p></p>\n\t        <field name=\"\u5165\u804c\u65e5\u671f:\"><date-input ng-model=\"user.rzrq\"></date-input></field>\n\t        <field name=\"\u5e73\u53f0\u6743\u9650:\"><selector empty-label=\"\u8bf7\u9009\u62e9\u6743\u9650\" ng-model='user.allow' source='allowname'></selector></field> \n    \t</div>    \t\n\t</div>\n\t<div class=\"edit-bottom\">\n\t\t<div class=\"title\">\n       \t\t<img src=\"images/geren.png\" />\u4e2a\u4eba\u8d44\u6599\n    \t</div>\n    \t<div class=\"item\">\n       \n\t        <field name=\"\u6027\u522b:\"><selector empty-label=\"\u8bf7\u9009\u62e9\u6027\u522b\" ng-model='user.sexname' source='sex'></selector></field>\n\t        <field name=\"\u751f\u65e5:\"><date-input ng-model=\"user.csrq\"></date-input></field>\n\t        <P></P>\n\t        <field name=\"\u5b66\u5386:\"><selector empty-label=\"\u8bf7\u9009\u62e9\u5b66\u5386\" ng-model='user.xl' source='xlname'></selector></field>\n\t        <field name=\"\u8eab\u4efd\u8bc1:\"><text-input ng-model=\"user.sfzh\" placeholder=\"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7\"></text-input></field>\n\t        <field name=\"\u90ae\u7bb1:\"><text-input ng-model=\"user.emai\" placeholder=\"\u8bf7\u8f93\u5165\u90ae\u7bb1\"></text-input></field>\n\t    </div>\n\t</div>\n\t<anniu candidate ng-click=\"save()\">\u4fdd\u5b58</anniu>  \n</div>\n"}