{"controller":" [\"$scope\", \"views\", \"popup\", \"tasks\", \"api\", \"cache\", \"alert\", \"getfile\", \"mime\", function ($scope, views, popup, tasks, api, cache, alert,getfile,mime) {\r\n    \t$scope.$ViewTitle = '\u65b0\u589e\u4f9b\u5e94\u5546';    \t\r\n    \tvar provider = {\r\n\t\t\tid:-1,\r\n\t\t\tlx:1\r\n\t    };\r\n\t    $scope.provider=provider;\r\n\t    var sign=0;\r\n\t    //\u83b7\u53d6\u7701\u5217\u8868\r\n\t\tapi(\"/x6/getProvinceList.do\", {})\r\n\t\t\t.onsuccess(function(data) {\r\n\t\t\t\tfor(var i = 0; i < data.list.length; i++) {\r\n\t\t\t\t\tdata.list[i] = data.list[i].province;\r\n\t\t\t\t}\t\r\n\t\t\t\t$scope.provs = data.list;\r\n\t\t\t})\r\n\t\t//\u83b7\u53d6\u57ce\u5e02    \r\n\t\t$scope.getCityList=function(obj){\r\n\t\t\tsign++;\r\n\t\t\tif(sign>1){\r\n\t\t\t\t$scope.provider.city=\"\";\r\n\t\t\t\t$scope.provider.town=\"\";\r\n\t\t\t}\r\n\t\t\tvar param={\r\n\t\t\t\tprovince:obj\r\n\t\t\t}\r\n\t\t\tapi('/x6/getCityList.do',param)\r\n\t\t\t\t.onsuccess(function(data){\r\n\t\t\t\t\tfor(var i=0;i<data.list.length;i++){\r\n\t\t\t\t\t\tdata.list[i]=data.list[i].city;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.citys=data.list;\r\n\t\t\t\t})\r\n\t\t}\r\n\t\t//\u83b7\u53d6\u53bf\u533a    \r\n\t\t$scope.getTownList=function(obj){\r\n\t\t\tsign++;\r\n\t\t\tif(sign>2){\r\n\t\t\t\t$scope.provider.town=\"\";\r\n\t\t\t}\r\n\t\t\tvar param={\r\n\t\t\t\tcity:obj\r\n\t\t\t}\r\n\t\t\tapi('/x6/getTownList.do',param)\r\n\t\t\t\t.onsuccess(function(data){\r\n\t\t\t\t\tfor(var i=0;i<data.list.length;i++){\r\n\t\t\t\t\t\tdata.list[i]=data.list[i].town;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t$scope.areas=data.list;\r\n\t\t\t\t})\r\n\t\t}\r\n\t\t//\u4f9b\u5e94\u5546\u6839\u636e\u540d\u79f0\u5339\u914d\u673a\u6784\r\n\t\t$scope.names=[];\r\n\t\t$scope.providers=[];\t\t\r\n\t\tapi('/x6/getPubListByName.do',{lx:1,name:\"\"})\r\n\t\t\t.onsuccess(function(data){\t\t\t\t\r\n\t\t\t\tfor(var i=0;i<data.pubJgList.length;i++){\t\t\t\t\t\r\n\t\t\t\t\t$scope.providers.push(data.pubJgList[i]);\r\n\t\t\t\t}\t\r\n\t\t\t\t$scope.names=data.pubJgList;\t\t\t\t\r\n\t\t\t})\r\n\t\t$scope.$watch(\"provider.name\",function(){\t\t\t\r\n\t\t\tfor(var i=0;i<$scope.providers.length;i++){\r\n\t\t\t\tif($scope.provider.name==$scope.providers[i].name){\t\t\t\t\t\r\n\t\t\t\t\tangular.extend($scope.provider,$scope.providers[i]);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\t\t\t\r\n\t\t},true)\r\n\t\t/*{\r\n\t     * \u914d\u7f6e\u7f51\u7edc\u8bf7\u6c42\u7684\u53c2\u6570\r\n\t    }*/\r\n\t    var save = api.adapt($scope.provider, {\r\n\t    \tid:-1,\r\n\t    \tlx:1,\r\n\t    \tyxbz:0,\r\n\t    \tcountry:\"\u4e2d\u56fd\",\r\n\t        _name:'',\r\n\t        $province:'',\r\n\t        $city:'',\r\n\t        $town:'',\r\n\t        _dz:'',\r\n\t        _lxr:'',\r\n\t        _phone:/^1[34578]\\d{9}$/,\r\n            email:'',\r\n            zw:'',\r\n            _ysyf:'',\r\n            comments:'',          \r\n\t    }, \"/x6/saveDmjg.do\", \"\u4fdd\u5b58\u4f9b\u5e94\u5546\u4fe1\u606f\").onsuccess(function (result) {\t    \t\r\n\t        alert.success(\"\u6dfb\u52a0\u6210\u529f\uff01\");\t        \r\n\t        //\u6dfb\u52a0\u5b8c\u6210\u540e\u5173\u95ed\u7a97\u53e3\uff0c\u5e76\u5c06\u4fe1\u606f\u9001\u5230\u5217\u8868\u9875\u9762\t       \r\n\t        $scope.$CloseView(result.dmjg);\r\n\t    }).onpost(function(a){\r\n\t        //\u7f51\u7edc\u8bf7\u6c42\u53d1\u8d77\u65f6\uff0c\u7981\u6709\u539f\u6765\u7684\u6309\u94ae\u7ec4\r\n\t        $scope.$ViewOptions={\r\n\t            \u6b63\u5728\u4fdd\u5b58:function(){\r\n\t                return false;\r\n\t            }\r\n\t        };\r\n\t    }).onend(function(){\r\n\t        //\u7f51\u7edc\u8bf7\u6c42\u7ed3\u675f\u540e\uff0c\u8fd8\u539f\u6309\u94ae\u7ec4\r\n\t        $scope.$ViewOptions=viewOptions;\r\n\t    });\r\n\r\n\t\t//\u9ed8\u8ba4\u7684\u6309\u94ae\u7ec4\r\n\t\tvar viewOptions={\r\n\t\t    \u4fdd\u5b58:function(){\r\n\t\t        save();\r\n\t\t        return false;\r\n\t\t    },\r\n\t\t    \u53d6\u6d88:function(){\r\n\t\t    }\r\n\t\t};\r\n    \t//\u5c06\u6309\u94ae\u7ec4\u653e\u5728scope\u4e0a\uff0c\u4ee5\u4f7f\u5176\u663e\u793a\u5728\u7a97\u53e3\u5e95\u90e8\r\n\t\t$scope.$ViewOptions=viewOptions;\r\n   \t}]\r\n","template":"<style>.setting-provider-add .edit-items {\n  width: 64%;\n  margin: 5px auto;\n}\n.setting-provider-add .edit-items > .field {\n  float: right;\n  margin: 10px 0;\n}\n.setting-provider-add .edit-items > .field > .text-input {\n  height: 30px;\n  margin-left: 2%;\n  width: 77.5%;\n}\n.setting-provider-add .edit-items:nth-child(5) > .field {\n  width: 315px;\n}\n.setting-provider-add .edit-items:nth-child(7) > .field {\n  width: 300px;\n  margin-bottom: 0;\n}\n.setting-provider-add .edit-items:nth-child(7) > .field .selector {\n  width: 27%;\n  margin-bottom: 10px;\n}\n.setting-provider-add .edit-items:nth-child(8) > .field {\n  margin-top: 0;\n}\n.setting-provider-add .long > .selector {\n  width: 77%;\n}\n</style><div class=\"edit-items\">\t\t\t\r\n\t<field name=\"\u540d\u79f0 \">\r\n\t\t<!--<text-input placeholder=\"\u8bf7\u8f93\u5165\u540d\u79f0\" ng-model=\"provider.name\"></text-input>-->\r\n\t\t<baidu ng-model=\"provider.name\" source=\"names\"></baidu>\t\t\r\n\t</field>\r\n</div>\r\n<div class=\"edit-items\">\t\r\n\t<field name=\"\u8054\u7cfb\u4eba\">\r\n\t\t<text-input placeholder=\"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\" ng-model=\"provider.lxr\"></text-input>\r\n\t</field>\r\n</div>\r\n<div class=\"edit-items\">\t\r\n\t<field name=\"\u624b\u673a\u53f7\">\r\n\t\t<text-input placeholder=\"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\" ng-model=\"provider.phone\"></text-input>\r\n\t</field>\t\r\n</div>\r\n<div class=\"edit-items\">\t\r\n\t<field name=\"\u542f\u7528\u6807\u5fd7\">\t\t\r\n\t\t<span ng-click=\"provider.yxbz = k\" ng-repeat=\"(k,v) in ['\u542f\u7528', '\u4e0d\u542f\u7528']\">\r\n\t\t    <radio ng-model=\"[true][provider.yxbz - k]\" disabled>{{v}}</radio>\r\n\t\t</span>\t\t\t\t\r\n\t</field>\t\r\n</div>\r\n<div class=\"edit-items\">\t\r\n\t<field name=\"\u5e94\u4ed8\u6b3e\">\r\n\t\t<text-input placeholder=\"\u8bf7\u8f93\u5165\u5e94\u4ed8\u6b3e\" ng-model=\"provider.ysyf\"></text-input>\r\n\t</field>\t\r\n</div>\r\n<div class=\"edit-items\">\t\r\n\t<field name=\"\u5730\u5740\">\r\n\t\t<selector ng-model='provider.province' source='provs'  ng-change=\"getCityList(provider.province)\" empty-label=\"\u7701\"></selector>\r\n\t\t<selector ng-model='provider.city' source=\"citys\"  ng-change=\"getTownList(provider.city)\" empty-label=\"\u5e02\"></selector>\r\n\t\t<selector ng-model='provider.town' source='areas' empty-label=\"\u53bf\"></selector>\t\t\t\t\t\t\r\n\t</field>\t\r\n</div>\r\n<div class=\"edit-items\">\r\n\t<field name=\"\">\r\n\t\t<text-input ng-model=\"provider.dz\"></text-input>\t\r\n\t</field>\r\n</div>\r\n<div class=\"edit-items\">\t\r\n\t<field name=\"\u5907\u6ce8\">\r\n\t\t<text-input ng-model=\"provider.comments\"></text-input>\r\n\t</field>\t\r\n</div>"}