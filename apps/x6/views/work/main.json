{"controller":" [\"$scope\", \"popup\", \"alert\", \"api\", \"album\", \"getScrollPage\", \"user\", \"hashMap\", \"$document\", \"cache\", \"mime\", \"getfile\", function ($scope, popup, alert, api, album, getScrollPage, user, hashMap, $document, cache,mime,getfile) {\n    //\u7b2c\u4e00\u4e2a\u8f93\u5165\u6846\u8981\u53d1\u5e03\u7684\u6d88\u606f\n    var message = {\n        text: '',\n        hasfocus: false,\n        blurAll: function () {\n//            $scope.message.hasfocus = false;\n            $scope.images.ing = false;\n            //$scope.hideALists();\n        },\n        recievegw: []\n    };\n    $scope.message = message;\n    var pic_mime=mime(\"png\");\n    var doc_mime=mime(\"doc\",\"xls\",\"pptx\",\"pdf\");\n\n    //\u6587\u4ef6\u663e\u793a\u56fe\u7247\n    $scope.genpic = function (url) {\n        if (pic_mime.reg.test(url)) {\n            return url;\n        } else {\n            var canvas = document.createElement(\"canvas\");\n            var ctx = canvas.getContext(\"2d\");\n            ctx.fillStyle = \"#000000\";\n            ctx.width = 20;\n            ctx.height = 20 * 2;\n            ctx.fillText(\"\u6587\u4ef6\", 0, 0, 60, 60);\n            return canvas.toDataURL();\n        }\n    };\n    $scope.blurAll = message.blurAll;\n    //\u4e0a\u4f20\u6587\u4ef6\n    var uploadFiles = function (files) {\n        if (!files.length) {\n            return;\n        }\n        var _files = hashMap();\n        $scope.images.forEach(function (img) {\n            _files(img, true);\n        });\n        var _imgs = [];\n        var images = $scope.images;\n        for (var cx = 0, dx = files.length; cx < dx; cx++) {\n            var file = files[cx];\n            if (_files(file)) {\n                continue;\n            }\n            if (file.size > 5120 * 1024) {\n                alert.error(\"\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc75M\uff01\");\n                continue;\n            }\n            if (file.name.match(pic_mime.reg)) {\n                if (images.ing !== 1) {//\u5728\u6587\u4ef6\u5217\u8868\u4e2d\u6dfb\u52a0\u4e86\u56fe\u7247\n                    //continue;\n                }\n                if (images.imgcount >= 9) {\n                    alert.error(\"\u6700\u591a\u4e0a\u4f209\u5f20\u56fe\u7247\uff01\");\n                    continue;\n                }\n                file.src = URL.createObjectURL(file);\n                file.isimg = true;\n                images.splice(images.imgcount, 0, file);\n                images.imgcount++;\n            } else if (file.name.match(doc_mime.reg)) {\n                if (images.ing !== 2) {//\u5728\u56fe\u7247\u5217\u8868\u4e2d\u6dfb\u52a0\u4e86\u6587\u4ef6\n                    //continue;\n                }\n                if (images.length - images.imgcount >= 4) {\n                    alert.error(\"\u6700\u591a\u4e0a\u4f204\u4e2a\u6587\u6863\uff01\");\n                    continue;\n                }\n                $scope.images.push(file);\n            } else {\n                alert.error(\"\u4e0d\u652f\u6301\u4e0a\u4f20\" + file.name);\n                continue;\n            }\n            _imgs.push(file);\n            _files(file, true);\n        }\n        _imgs.length && _imgs.forEach(function (img) {\n            if (img.isimg) {\n                images.imgwait++;\n            }\n            images.filewait++;\n            img.fileProp = false;\n            img.xhr = api(\"/x6/saveMsgFile.do\", img).onsuccess(function (result) {\n                var fileProp = result.fileProp;\n                img.fileProp = fileProp[0];\n                img.ing = false;\n            }).onerror(function (error) {\n                img.error = error;\n            }).onstart(function () {\n                img.ing = true;\n            }).onend(function () {\n                if (img.isimg) {\n                    images.imgwait--;\n                }\n                images.filewait--;\n            }).queue();\n        });\n    };\n    //\u5220\u9664\u6587\u4ef6\n    $scope.showcancel = function (img, $index, images) {\n        if (img.showcancel) {\n            images.splice($index, 1);\n            img.xhr.cancel();\n            images.imgcount = images.imgcount - (2 - images.ing);\n            if (img.fileProp) {\n                api(\"/x6/deleteMsgFile.do\", {serverpath: img.fileProp.serverpath});\n            }\n            return;\n        }\n        img.showcancel = true;\n        $timeout(function () {\n            img.showcancel = false;\n        }, 1000);\n    };\n    //\u62d6\u62fd\u4e0a\u4f20\n    var ondragover = function (event) {\n        event.preventDefault();\n    };\n    var ondrop = function (event) {\n        event.preventDefault();\n        uploadFiles(event.dataTransfer.files);\n    };\n    $document.on(\"dragover\", ondragover);\n    $document.on(\"drop\", ondrop);\n\n    //\u9009\u62e9\u6587\u4ef6\u5e76\u4e0a\u4f20\n    $scope.images = [];\n    $scope.images.imgcount = 0;\n    $scope.images.imgwait = 0;\n    $scope.images.filewait = 0;\n    $scope.$on(\"$destroy\", function () {\n        $document.off(\"dragover\", ondragover);\n        $document.off(\"drop\", ondrop);\n    });\n    $scope.getfile = function () {\n        $scope.blurAll = angular.noop();\n        getfile([pic_mime.accept, doc_mime.accept][$scope.images.ing - 1],uploadFiles,true);\n    };\n//    $scope.focusFile = false;\n\n    $scope.aLists = {\n        \"\u516c\u5f00\": {\n            path: 'images/gk.png',\n            do: function () {\n                message.recievegw = [];\n            }\n        },\n        \"\u9009\u62e9\u5c97\u4f4d\": {\n            path: 'images/jsr.png',\n            do: function () {\n                $scope.blurAll = angular.noop();\n                popup(\"/work/select_role\", {\n                    gwlist: cache.gwlist,\n                    $ViewTitle: \"\u9009\u62e9\u5c97\u4f4d\",\n                    $ViewOptions: {\n                        \u786e\u5b9a: function () {\n                            message.recievegw = cache.gwlist.filter(function (gw) {\n                                return gw.checked;\n                            });\n                        },\n                        \u53d6\u6d88: function () {\n                        }\n                    }\n                }).onclose(function () {\n                    if (!message.recievegw.length) {\n                        $scope.activeAList(\"\u516c\u5f00\");\n                    }\n                    $scope.blurAll = message.blurAll;\n                });\n            }\n        }\n    };\n    $scope.showALists = function () {\n        $scope.showALists.ing = true;\n    };\n    $scope.hideALists = function () {\n        $scope.showALists.ing = false;\n    };\n    $scope.activeAList = function (a) {\n        $scope.active_aList = a;\n        var o = $scope.aLists[a];\n        o.do && o.do();\n        $scope.$Save(\"active_aList\");\n    };\n\n\n    if (!$scope.active_aList) {\n        $scope.activeAList(\"\u516c\u5f00\");\n    }\n\n\n    $scope.menus = {\n        \"\u6211\u7684\u5de5\u4f5c\u5708\": {\n            lx: 1\n        },\n\n        \"\u6211\u7684\u6536\u85cf\": {\n            lx: 2\n        },\n        \"\u6211\u7684\u5173\u6ce8\": {\n            lx: 3\n        }\n    };\n    var keys = Object.keys($scope.menus);\n    //\u4fe1\u606f\u4fdd\u5b58\u4f4d\u7f6e\n    $scope.messages = [];\n    //\u6eda\u52a8\u52a0\u8f7d\u5de5\u5177;\n    var msgRequest = getScrollPage($scope.messages, function (parameters, _callback) {\n        api(\"/x6/getMsgList.do\", parameters).success(_callback);\n    });\n    $scope.msgRequest=msgRequest;\n    //\u83b7\u53d6\u6211\u7684\u5de5\u4f5c\u5708\n    $scope.active = function (key) {\n        var menu = $scope.menus[key];\n        if(!menu){\n            key=\"\u6211\u7684\u5de5\u4f5c\u5708\";\n            menu=$scope.menus[key];\n        }\n        $scope.active_menu = key;\n        $scope.$Save(\"active_menu\");\n            msgRequest.refresh({\n                lx: menu.lx\n            }, function (list) {\n                list.forEach(function (msg) {\n                    msg.picList = msg.fileprop.filter(function (file) {\n                        return pic_mime.reg.test(file.originName);\n                    });\n                    msg.fileList = msg.fileprop.filter(function (file) {\n                        return doc_mime.reg.test(file.originName);\n                    }).map(function (file) {\n                        file.extend = doc_mime.reflect[file.originName.match(doc_mime.reg)[1]];\n                        return file;\n                    });\n                });\n            });\n    };\n    var refresh = function () {\n        $scope.active($scope.active_menu);\n    };\n    refresh();\n    user.onlogin = refresh;\n    $scope.$on(\"$destroy\", function () {\n        delete user.onlogin;\n    });\n    /**\n     * \u5220\u9664\u5de5\u4f5c\u5708\n     * @param {type} msg\n     * @returns {undefined}\n     */\n    $scope.removeMsg = function (msg) {\n        api(\"/x6/deleteMsg.do\", {\n            msgId: msg.id,\n            gsdm: msg.gsdm\n        }, \"\u5220\u9664\").success(function () {\n            refresh();\n//            var messages = $scope.messages;\n//            for (var dec = messages.length - 1; dec >= 0; dec--) {\n//                if (messages[dec].id === msg.id) {\n//                    messages.splice(dec, 1);\n//                }\n//            }\n        });\n    };\n    $scope.removeReply = function (rpl, msg) {\n        api(\"/x6/deleteReply.do\", {\n            replyId: rpl.id,\n            gsdm: msg.gsdm\n        }, \"\u5220\u9664\u8bc4\u8bba\").onsuccess(function () {\n            var replyList = msg.replyList;\n            for (var dec = replyList.length - 1; dec >= 0; dec--) {\n                if (replyList[dec] === rpl) {\n                    replyList.splice(dec, 1);\n                }\n            }\n        });\n    };\n\n    /*wangkun 2017-01-17*/\n\n    $scope.newsoperat = {};\n    $scope.newsoperat.isreply = false;\n    $scope.showControl = function (msg) {\n        msg.isshow = $scope.newsoperat.isshow ? false : true;\n    };\n\n    $scope.hideControl = function (msg) {\n        msg.isshow = false;\n    };\n    $scope.zan = function (msg) {\n        api(\"/x6/changeAgreeStatus.do\", {\n            msgId: msg.id,\n            gsdm: msg.gsdm,\n            agreeStatus: 1 - msg.agree\n        }).success(function () {\n            msg.agree = 1 - msg.agree;\n            msg.agreenum += msg.agree ? 1 : -1;//\u76ee\u524d\u670d\u52a1\u5668\u6ca1\u6709\u8fd4\u56de\n        });\n    };\n    $scope.showTaggle = function (msg) {\n        msg.isreplay = msg.isreplay ? false : true;\n    };\n\n    /*\u53d1\u5e03\u5de5\u4f5c\u5708*/\n    $scope.sendMessage = function () {\n        var params = {\n            msgContent: $scope.message.text,\n            isPub: 0,\n            fileProp: $scope.images.map(function (img) {\n                return img.fileProp;\n            }),\n            recieveIds: message.recievegw.map(function (gw) {\n                return gw.id;\n            }).join(\",\")\n        };\n        if (!params.msgContent) {\n            return alert.warn(\"\u8bf4\u70b9\u4ec0\u4e48\u5427\uff01\");\n        }\n        api(\"/x6/saveMsg.do\", params)\n                .onsuccess(function (data) {\n                    $scope.active($scope.active_menu);\n                    $scope.message.text = \"\";\n                    $scope.images.splice(0);\n                    $scope.getfile.ing = false;\n                    $scope.images.imgcount = 0;\n                    $scope.images.imgwait = 0;\n                    $scope.images.filewait = 0;\n                    //\u6d4b\u8bd5\u7528!\u653e\u5230\u9996\u6761\u4f4d\u7f6e,\u5e94\u4fee\u6539\u653e\u5230\u6700\u540e\u4e00\u6761\u7f6e\u9876\u7684\u540e\u9762\n//                    var _user = user();\n//                    data.msgInfo.userurl = _user.userpic || 'http://www.feizl.com/upload2007/2012_10/121012171229167.jpg';//\u5934\u50cf\n//                    data.msgInfo.username = _user.name;//\u59d3\u540d\n//                    data.msgInfo.ssgsname = _user.ssgsname || '\u76c8\u5efa\u79d1\u6280';//\u516c\u53f8\n//                    data.msgInfo.gwname = _user.gwname || 'Boss';//\u5c97\u4f4d\n//                    $scope.menus[keys[0]].list.unshift(data.msgInfo);\n                });\n    };\n    /*\u5de5\u4f5c\u5708\u6d88\u606f\u4e0a\u4f20\u6587\u4ef6*/\n    //ie9\u4e0d\u652f\u6301\n//    var reader = new FileReader();\n//    $scope.upload = function (fileObj) {\n//        for (var i = 0; i < fileObj.length; i++) {\n//            reader.readAsDataURL(fileObj[i]);\n//            reader.onload = function (res) {\n//                console.log(this.result);\n//            };\n//        }\n//    };\n    /*\u5de5\u4f5c\u5708\u56fe\u7247\u6d4f\u89c8*/\n    $scope.albumBrowse = function (imgObj, index) {\n        album.browse(imgObj, index);\n    };\n    /*\u56de\u590d\u5de5\u4f5c\u5708*/\n    $scope.replyMessage = function (msg, index) {\n        var params = {\n            msgId: msg.id,\n            lx: 0,\n            content: msg.replyTxt\n        };\n        api('/x6/saveReply.do', params)\n                .onsuccess(function (data) {\n                    //console.log(data);\n                    delete msg.replyTxt;\n                    msg.replyList.push(data.replyInfo);\n                    msg.isreplay = false;\n                });\n\n    };\n    /*\u6536\u85cf/\u53d6\u6d88\u6536\u85cf*/\n    $scope.collect = function (msg) {\n        var temp = msg.sc ? '\u53d6\u6d88\u6536\u85cf' : '\u6536\u85cf';\n        var params = {\n            gsdm: msg.gsdm,\n            msgId: msg.id,\n            scStatus: 1 - msg.sc\n        };\n        api('/x6/changeScStatus.do', params).onsuccess(function (data) {\n            msg.sc = 1 - msg.sc;\n        });\n    };\n    /*\u7f6e\u9876/\u53d6\u6d88\u7f6e\u9876*/\n    $scope.setTop = function (msg) {\n        var status = msg.sortid ? 0 : 1;\n        var params = {\n            gsdm: msg.gsdm,\n            msgId: msg.id,\n            zdStatus: status\n        };\n        api('/x6/changeZdStatus.do', params).onsuccess(function (data) {\n            msg.sortid = status;\n        });\n    };\n    /*\u83b7\u53d6\u540d\u7247*/\n    var getCard = function (msg) {\n        var params = {\n            userId: msg.userid,\n            gsdm: msg.gsdm\n        };\n        api('/x6/getMsgUserInfo.do', params).onsuccess(function (data) {\n            var data = data.userInfo;\n            msg.gzStatus = data.gzStatus;\n            msg.phone = data.phone;\n            msg.userid = data.userid;\n        });\n    }\n\n    /*\u663e\u793a\u540d\u7247*/\n    $scope.displayCard = function (msg, rpl) {\n        if (!rpl) {\n            getCard(msg);\n            setTimeout(function () {\n                msg.xscard = true;\n            }, 50)\n\n        } else {\n            rpl.gsdm = msg.gsdm;\n            rpl.userid = msg.userid;\n            getCard(rpl);\n            setTimeout(function () {\n                rpl.xscard = true;\n            }, 50)\n        }\n    }\n    $scope.hideCard = function (msg) {\n        msg.xscard = false;\n    }\n    /*\u5173\u6ce8/\u53d6\u6d88\u5173\u6ce8*/\n    $scope.isconcern = function (msg) {\n        var _user = user();\n        var status = msg.gzStatus == 1 ? 0 : 1;\n        var params = {\n            userId: msg.userid,\n            gsdm: msg.gsdm,\n            gzStatus: status\n        };\n        api('/x6/changeGzStatus.do', params).onsuccess(function (data) {\n            msg.gzStatus = status;\n        });\n    };\n    /*\u56de\u590d\u8bc4\u8bba*/\n    $scope.replyComment = function (msg, name) {\n        msg.isreplay = true;\n        msg.replyTxt = \"@\" + name + \" \";\n        $timeout(function () {\n            document.getElementsByTagName(\"textarea\")[1].focus();\n        });\n        //angular.element(document.getElementsByTagName(\"textarea\")[1]).focus();\n    };\n    $scope.pagesize = 50;\n    $scope.total = 5;\n    //$scope.current=1;\n}]","template":"<style>.work-main .pointer {\n  cursor: pointer;\n}\n.work-main .message {\n  margin-bottom: 20px;\n}\n.work-main .message > .text-input {\n  display: block;\n  width: 100%;\n  border-radius: 4px ;\n  position: relative;\n  overflow-y: visible;\n  min-height: 40px;\n  -webkit-transition: 0.1s min-height;\n  transition: 0.1s min-height;\n  border: 1px solid #e0e3e5;\n}\n.work-main .message > .text-input > textarea {\n  padding: 10px 15px;\n}\n.work-main .message > .text-input > span {\n  color: #e2e3e5;\n}\n.work-main .message > .text-input.hasfocus,\n.work-main .message > .text-input.focus {\n  min-height: 60px;\n  border-radius: 4px 4px 0 0;\n  border: 1px solid #e0e3e5;\n  border-bottom: 1px solid #e2e3ed;\n}\n.work-main .message > .options {\n  border: 1px solid #e0e3e5;\n  border-top: none;\n  border-radius: 0 0 4px 4px;\n  margin: 0;\n  background-color: #f8f8f8;\n  padding: 0 15px ;\n  text-align: right;\n  line-height: 50px;\n}\n.work-main .message > .options > div {\n  display: inline-block;\n  font-size: 12px;\n}\n.work-main .message > .options > .anniu.file:hover {\n  color: #47a0de;\n}\n.work-main .message > .options > .anniu.file:hover:active {\n  color: #4385f5;\n}\n.work-main .message > .options > .anniu.file,\n.work-main .message > .options > .anniu.file.focus {\n  background-color: rgba(0, 0, 0, 0);\n}\n.work-main .message > .options > .anniu.file {\n  color: #9da4b3;\n  font-size: 13px;\n  margin-left: 0;\n  background-size: 18px 16px;\n  background-position: left 0 center;\n  float: left;\n  height: 50px;\n  box-shadow: none;\n}\n.work-main .message > .options > .anniu.file > * {\n  cursor: pointer;\n  box-shadow: none;\n  padding-left: 20px;\n}\n.work-main .message > .options > .anniu.file input[type=file] {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border: none;\n  outline: none;\n  bottom: 0;\n  opacity: 0;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n}\n.work-main .message > .options > .anniu.file > input:hover {\n  background-color: rgba(67, 133, 244, 0);\n}\n.work-main .message > .options > .anniu.file > input:hover:active {\n  background-color: rgba(67, 133, 244, 0);\n}\n.work-main .message > .options > .switch:after {\n  content: '';\n  display: inline-block;\n  vertical-align: middle;\n  /*position: absolute;*/\n  right: 0;\n  margin-top: -3px;\n  width: 4px;\n  height: 4px;\n  border: 2px solid ;\n  border-top: none;\n  border-left: none;\n  -webkit-transform: rotate(45deg);\n      -ms-transform: rotate(45deg);\n          transform: rotate(45deg);\n}\n.work-main .message > .options > .switch.open,\n.work-main .message > .options > .switch.open:hover {\n  color: #4385f5;\n}\n.work-main .message > .options > .switch:hover {\n  color: #47a0de;\n}\n.work-main .message > .options > .switch.open:after {\n  margin-top: 0;\n  -webkit-transform: rotate(225deg);\n      -ms-transform: rotate(225deg);\n          transform: rotate(225deg);\n}\n.work-main .message > .options > .text {\n  color: #C2C4C9;\n}\n.work-main .message > .options > .switch {\n  color: #7b8182;\n  padding: 0 14px 0 6px;\n  text-align: left;\n  width: auto;\n  min-width: 60px;\n  position: relative;\n}\n.work-main .message > .options > .switch > input {\n  position: absolute;\n  opacity: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  border: none;\n  outline: none;\n  bottom: 0;\n  cursor: default;\n}\n.work-main .message > .options > .switch > div.opts {\n  border: 1px solid #F2F4F9;\n  border-radius: 3px;\n  position: absolute;\n  height: auto;\n  z-index: 1;\n  width: auto;\n  box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.3);\n  min-width: 120px;\n  left: 50%;\n  margin-left: -55px;\n  margin-top: -10px;\n  background-color: #ffffff;\n}\n.work-main .message > .options > .switch > div.opts > div {\n  color: #7b8182;\n  cursor: pointer;\n  height: 30px;\n  line-height: 16px;\n  padding: 7px;\n}\n.work-main .message > .options > .switch > div.opts > div > img {\n  vertical-align: top;\n  margin-right: 8px;\n}\n.work-main .message > .options > .switch > div.opts > div:hover {\n  background-color: #f7f7f9;\n}\n.work-main .message > .options > .anniu {\n  width: 80px;\n  height: 26px;\n  font-size: 12px;\n  background-color: #4385f4;\n  margin-left: 30px;\n}\n.work-main .message > .file-container {\n  width: 274px;\n  height: auto;\n  border: 1px solid #e1e2e5;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);\n  border-radius: 4px;\n  position: absolute;\n  background-color: #fff;\n  margin: -4px 0 0 4px;\n  z-index: 2;\n  /*display: none;*/\n}\n.work-main .message > .file-container.t1 > p:first-child:before,\n.work-main .message > .file-container.t2 > p:first-child:before {\n  content: \"\";\n  display: block;\n  -webkit-transform: rotate(45deg);\n      -ms-transform: rotate(45deg);\n          transform: rotate(45deg);\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  background-color: inherit;\n  border: 1px solid #e1e2e5;\n  border-bottom: none;\n  border-right: none;\n  top: -6px;\n  left: 40px;\n}\n.work-main .message > .file-container.t1 > p:first-child:before {\n  left: 40px;\n}\n.work-main .message > .file-container.t2 > p:first-child:before {\n  left: 120px;\n}\n.work-main .message > .file-container.t2 > div,\n.work-main .message > .file-container.t2 > .upload-btn {\n  width: 230px;\n}\n.work-main .message > .file-container > p:first-child {\n  width: 100%;\n  border-radius: 4px 4px 0 0;\n  line-height: 31px;\n  margin: 0;\n  padding: 0 0 0 10px;\n  color: #495467;\n  font-size: 12px;\n  background: #f8f8f8;\n}\n.work-main .message > .file-container > p:first-child > i {\n  float: right;\n  width: 30px;\n  height: 30px;\n  -webkit-transform: rotate(45deg);\n      -ms-transform: rotate(45deg);\n          transform: rotate(45deg);\n  position: relative;\n  cursor: pointer;\n}\n.work-main .message > .file-container > p:first-child > i:after,\n.work-main .message > .file-container > p:first-child > i:before {\n  content: \"\";\n  position: absolute;\n  display: block;\n  width: 6px;\n  height: 6px;\n  left: 50%;\n  top: 50%;\n  margin-left: -6px;\n  margin-top: -6px;\n  border: 1px solid #90959e;\n  border-left: none;\n  border-top: none;\n}\n.work-main .message > .file-container > p:first-child > i:after {\n  margin-left: 0;\n  margin-top: 0;\n  -webkit-transform: rotate(180deg);\n      -ms-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n.work-main .message > .file-container > p:first-child + p {\n  display: block;\n  margin: 15px ;\n  color: #888;\n}\n.work-main .message > .file-container > div,\n.work-main .message > .file-container > .upload-btn {\n  width: 60px;\n  height: 60px;\n  margin: 0 0px 20px 22px;\n  display: block;\n  float: left;\n  position: relative;\n  font-size: 10px;\n  overflow: hidden;\n}\n.work-main .message > .file-container > div {\n  position: relative;\n  background-color: #f8f8f8;\n  color: #5a6274;\n  /*&:hover:after,&:hover i{opacity: 1;}*/\n}\n.work-main .message > .file-container > div.ing > img {\n  display: none;\n}\n.work-main .message > .file-container > div.ing > span:before {\n  content: \"\u6b63\u5728\u4e0a\u4f20\";\n  display: inline;\n}\n.work-main .message > .file-container > div.err > img {\n  display: none;\n}\n.work-main .message > .file-container > div.err > span:before {\n  content: \"\u4e0a\u4f20\u5931\u8d25\";\n  display: inline;\n}\n.work-main .message > .file-container > div.cancel > img {\n  display: none;\n}\n.work-main .message > .file-container > div.cancel > span:before {\n  content: \"\u518d\u70b9\u4e00\u6b21\u5220\u9664 \";\n  color: #c00;\n  display: inline;\n}\n.work-main .message > .file-container > div > a.uploader {\n  height: 3px;\n  border-radius: 1px;\n  position: absolute;\n  bottom: 23px;\n  left: 10px;\n  right: 10px;\n  display: block;\n  background-color: #dcdcdc;\n}\n.work-main .message > .file-container > div > a.uploader > b {\n  height: 100%;\n  display: block;\n  left: 0;\n  top: 0;\n  -webkit-transition: width 0.1s;\n  transition: width 0.1s;\n  background-color: #4385f5;\n}\n.work-main .message > .file-container > div > img {\n  width: 100%;\n  height: 100%;\n}\n.work-main .message > .file-container > div > span {\n  border: 1px dashed #eeeeee;\n  display: block;\n  width: 100%;\n  height: 100%;\n  padding: 5px 10px 20px 10px;\n  top: 0;\n  left: 0;\n  line-height: 20px;\n  position: absolute;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.work-main .message > .file-container > div:after {\n  content: '';\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  opacity: 0;\n  -webkit-transition: opacity .2s;\n  transition: opacity .2s;\n  background: rgba(0, 0, 0, 0.5);\n}\n.work-main .message > .file-container > div > i {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  width: 20px;\n  line-height: 20px;\n  color: #90959e;\n  text-align: center;\n  font-size: 18px;\n  z-index: 9;\n  /*opacity: 0;*/\n  cursor: pointer;\n}\n.work-main .message > .file-container > .upload-btn {\n  border: 2px dashed #bfbfbf;\n  cursor: pointer;\n}\n.work-main .message > .file-container > .upload-btn > input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  outline: none;\n  opacity: 0;\n  cursor: pointer;\n}\n.work-main .message > .file-container > .upload-btn > i {\n  display: none;\n}\n.work-main .message > .file-container > .upload-btn:after,\n.work-main .message > .file-container > .upload-btn:before {\n  content: \"\";\n  position: absolute;\n  display: block;\n  width: 12px;\n  height: 12px;\n  left: 50%;\n  top: 50%;\n  margin-left: -12px;\n  margin-top: -12px;\n  border: 1px solid #90959e;\n  border-left: none;\n  border-top: none;\n}\n.work-main .message > .file-container > .upload-btn:after {\n  margin-left: 0;\n  margin-top: 0;\n  -webkit-transform: rotate(180deg);\n      -ms-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n.work-main .tabs {\n  line-height: 50px;\n}\n.work-main .tabs > div {\n  cursor: pointer;\n  color: #666;\n  display: inline-block;\n  margin-right: 30px;\n  font-size: 15px;\n}\n.work-main .tabs > div.open,\n.work-main .tabs > div:hover {\n  border-bottom: 3px solid #15a4fa;\n}\n.work-main .board > div {\n  min-width: 390px;\n  margin-bottom: 40px;\n}\n.work-main .board > div > .title {\n  position: relative;\n  min-height: 77px;\n  border-radius: 6px 6px 0 0 ;\n  border-top: 1px solid #e0e3e5;\n  border-left: 1px solid #e0e3e5;\n  border-right: 1px solid #e0e3e5;\n  padding: 10px 10px 40px 80px;\n  color: #babec4;\n  font-size: 16px;\n}\n.work-main .board > div > .title > div {\n  display: inline-block;\n}\n.work-main .board > div > .title > div:last-child {\n  float: right;\n  position: relative;\n}\n.work-main .board > div > .title > div:last-child i {\n  font-size: 18px;\n  cursor: pointer;\n}\n.work-main .board > div > .title > div:last-child i.newsControlActive {\n  color: #4385F5;\n}\n.work-main .board > div > .title > div:last-child input {\n  position: absolute;\n  width: 12px;\n  height: 19px;\n  top: 0;\n  left: 0;\n  background: none;\n  border: none;\n  outline: none;\n  cursor: pointer;\n}\n.work-main .board > div > .title > div:last-child div {\n  position: absolute;\n  box-sizing: border-box;\n  border: 1px solid #ccc;\n  border-radius: 3px ;\n  left: -90px;\n  background: #fff;\n  box-shadow: 1px 1px 2px #ccc;\n}\n.work-main .board > div > .title > div:last-child div p {\n  margin: 0;\n  width: 100px;\n  padding: 5px 0px 5px 10px;\n  font-size: 12px;\n  color: #888;\n  cursor: pointer;\n}\n.work-main .board > div > .title > div:last-child div p:hover {\n  background: #F1F4F4;\n}\n.work-main .board > div > .title > .man {\n  color: #666;\n  margin-right: 10px;\n  white-space: nowrap;\n}\n.work-main .board > div > .title > .man > .label {\n  display: inline-block;\n  margin: 6px;\n  line-height: 13px;\n  border-left: 1px solid;\n  padding: 0 15px;\n  color: #babec4;\n}\n.work-main .board > div > .title > .man > .avatar {\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: #ccc;\n  position: absolute;\n  left: 10px;\n  width: 45px;\n  height: 45px;\n  bottom: 14px;\n  border-radius: 4px;\n}\n.work-main .board > div > .title > .man > .card {\n  position: absolute;\n  left: 48px;\n  top: -20px;\n  width: 400px;\n  height: 210px;\n  background: url(images/bg.png) no-repeat;\n  background-size: 100%;\n  z-index: 1;\n  overflow: hidden;\n}\n.work-main .board > div > .title > .man > .card > .card-top {\n  padding: 40px;\n}\n.work-main .board > div > .title > .man > .card > .card-top > .card-avatar {\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 100px;\n  height: 100px;\n  border-radius: 4px;\n}\n.work-main .board > div > .title > .man > .card > .card-top > .card-inf {\n  position: absolute;\n  left: 170px;\n  top: 25px;\n}\n.work-main .board > div > .title > .man > .card > .card-top > .card-inf > p {\n  line-height: 14px;\n}\n.work-main .board > div > .title > .man > .card > .card-top > .card-inf > .card-user {\n  color: #76a2f7;\n  font-size: 16px;\n}\n.work-main .board > div > .title > .man > .card > .card-top > .card-inf > .card-gs {\n  font-size: 14px;\n}\n.work-main .board > div > .title > .man > .card > .card-top > .card-inf > .card-jtinf {\n  color: #909090;\n  font-size: 12px;\n}\n.work-main .board > div > .title > .man > .card > .card-bottom {\n  margin: 0 20px 0 20px;\n  width: 353px;\n  height: 30px;\n  position: absolute;\n  background: #e4e4e4;\n  bottom: 10px;\n}\n.work-main .board > div > .title > .man > .card > .card-bottom > .concern {\n  display: block;\n  width: 100px;\n  line-height: 30px;\n  text-align: center ;\n  font-size: 14px;\n  color: #f29839;\n  cursor: pointer;\n  position: absolute;\n  right: 0;\n}\n.work-main .board > div > .title > .man > .card > .card-bottom > .concern > img {\n  vertical-align: middle;\n}\n.work-main .board > div > .title > .man > .time {\n  position: absolute;\n  bottom: 15px;\n  left: 80px;\n  color: #babec4;\n}\n.work-main .board > div > .title > .button {\n  float: right;\n  font-size: 14px;\n  margin-left: 20px;\n  color: #666;\n}\n.work-main .board > div > .main {\n  color: #4a5566;\n  font-size: 14px;\n  line-height: 24px;\n  background-color: #ffffff;\n  border-radius: 0 0 6px 6px;\n  border-bottom: 1px solid #e0e3e5;\n  border-left: 1px solid #e0e3e5;\n  border-right: 1px solid #e0e3e5;\n}\n.work-main .board > div > .main > p {\n  margin: 0;\n  padding: 15px 30px;\n  background: #F1F4F4;\n  font-size: 12px;\n  color: #3399cc;\n  cursor: pointer;\n}\n.work-main .board > div > .main > .msg {\n  padding: 15px 30px;\n}\n.work-main .board > div > .main > .images {\n  width: 600px;\n  margin-left: 30px;\n}\n.work-main .board > div > .main > .images > div {\n  display: inline-block;\n  width: 150px;\n  margin-right: 10px;\n  height: 120px;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  cursor: pointer;\n}\n.work-main .board > div > .main > .files {\n  margin-top: 10px;\n  overflow: hidden;\n  padding: 0 30px;\n}\n.work-main .board > div > .main > .files > a {\n  float: left;\n  display: block;\n  max-width: 22%;\n}\n.work-main .board > div > .main > .files > a > img {\n  width: 30px;\n  height: 30px;\n  float: left;\n}\n.work-main .board > div > .main > .files > a > span {\n  display: inline-block;\n  width: -webkit-calc(100% - 35px);\n  width: calc(100% - 35px);\n  margin-left: 5px;\n  line-height: 30px;\n  color: #666;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.work-main .board > div > .main > .files > a:first-child ~ a {\n  margin-left: 4%;\n}\n.work-main .board > div > .main > .opts {\n  border-radius: 0 0 6px 6px;\n}\n.work-main .board > div > .main > .opts > span {\n  color: #86afef;\n  display: inline-block;\n  padding: 0 10px;\n  line-height: 13px;\n  font-size: 14px;\n  border-left: 1px solid;\n}\n.work-main .board > div > .main > .opts > span > img {\n  vertical-align: top;\n  height: 14px;\n  width: auto;\n  margin-right: 6px;\n}\n.work-main .board > div > .main > .opts > span:nth-child(1) {\n  border-left: none;\n  padding-left: 0;\n}\n.work-main .board > div > .main > .comment {\n  background-color: #F1F4F4;\n  position: relative;\n  padding: 10px 30px 0 30px;\n  min-height: 63px;\n}\n.work-main .board > div > .main > .comment > .message {\n  width: auto;\n  padding: 10px;\n}\n.work-main .board > div > .main > .comment > .man {\n  min-height: 63px;\n  display: block;\n  position: relative;\n  padding: 8px 10px 0px 43px;\n  color: #666;\n  margin-right: 10px;\n}\n.work-main .board > div > .main > .comment > .man > .label {\n  display: inline-block;\n  margin: 2px;\n  line-height: 13px;\n  border-left: 1px solid;\n  padding: 0 15px;\n  color: #babec4;\n}\n.work-main .board > div > .main > .comment > .man > .avatar {\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: #ccc;\n  position: absolute;\n  left: 0;\n  width: 30px;\n  height: 30px;\n  top: 10px;\n  border-radius: 4px;\n}\n.work-main .board > div > .main > .comment > .man > .card {\n  position: absolute;\n  left: 25px;\n  top: -30px;\n  width: 400px;\n  height: 210px;\n  background: url(images/bg.png) no-repeat;\n  background-size: 100%;\n  z-index: 1;\n}\n.work-main .board > div > .main > .comment > .man > .card > .card-top {\n  padding: 40px;\n}\n.work-main .board > div > .main > .comment > .man > .card > .card-top > .card-avatar {\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 100px;\n  height: 100px;\n  border-radius: 4px;\n}\n.work-main .board > div > .main > .comment > .man > .card > .card-top > .card-inf {\n  position: absolute;\n  left: 170px;\n  top: 25px;\n}\n.work-main .board > div > .main > .comment > .man > .card > .card-top > .card-inf > p {\n  line-height: 14px;\n}\n.work-main .board > div > .main > .comment > .man > .card > .card-top > .card-inf > .card-user {\n  color: #76a2f7;\n  font-size: 16px;\n}\n.work-main .board > div > .main > .comment > .man > .card > .card-top > .card-inf > .card-gs {\n  font-size: 14px;\n}\n.work-main .board > div > .main > .comment > .man > .card > .card-top > .card-inf > .card-jtinf {\n  color: #909090;\n  font-size: 12px;\n}\n.work-main .board > div > .main > .comment > .man > .card > .card-bottom {\n  margin: 0 20px 0 20px;\n  width: 353px;\n  height: 30px;\n  position: absolute;\n  background: #e4e4e4;\n  bottom: 10px;\n}\n.work-main .board > div > .main > .comment > .man > .card > .card-bottom > .concern {\n  display: block;\n  width: 100px;\n  line-height: 30px;\n  text-align: center ;\n  font-size: 14px;\n  color: #f29839;\n  cursor: pointer;\n  position: absolute;\n  right: 0;\n}\n.work-main .board > div > .main > .comment > .man > .card > .card-bottom > .concern > img {\n  vertical-align: middle;\n}\n.work-main .board > div > .main > .comment > .man > .time {\n  position: absolute;\n  top: 33px;\n  left: 53px;\n  color: #babec4;\n}\n.work-main .board > div > .main > .comment > .man > .message {\n  line-height: 20px;\n  word-break: break-word;\n}\n.work-main .board > div > .main > .comment > .man > .message > p {\n  margin: 0;\n}\n.work-main .board > div > .main > .comment > .man > .message > p > span:first-child {\n  color: #959ca8;\n}\n.work-main .board > div > .main > .comment > .man > .message > p > span:first-child ~ span {\n  float: right;\n  color: #3399cc;\n  margin-left: 15px;\n  cursor: pointer;\n}\n.work-main .board > div > .main > .comment > .man > .message > p + p {\n  margin-top: 10px;\n  font-size: 12px;\n}\n.work-main .board > div > .main > .comment > .man > .message > p:before {\n  content: attr(data-name);\n  color: #3399cc;\n  white-space: nowrap;\n}\n.work-main .board > div > .main > .comment ~ .comment > .man {\n  border-top: 1px dashed #ccc ;\n  padding-top: 10px;\n}\n.work-main .board > div > .main > .comment:last-child {\n  padding-bottom: 15px;\n}\n.work-main .board > div > .main > .add-comment {\n  position: relative;\n}\n.work-main .board > div > .main > .add-comment p {\n  text-align: right;\n  color: #959ca8;\n  padding: 0 30px;\n  font-size: 12px;\n  margin: 0;\n  margin-bottom: 15px;\n}\n.work-main .board > div > .main > .add-comment p > span.select {\n  color: #4385F3;\n}\n.work-main .board > div > .main > .add-comment > p:first-child span:first-child {\n  float: left;\n}\n.work-main .board > div > .main > .add-comment > p:first-child span:first-child ~ span {\n  cursor: pointer;\n  margin-left: 20px;\n}\n.work-main .board > div > .main > .add-comment p i {\n  font-size: 16px;\n  cursor: pointer;\n  /*&:hover{color: #4385F5;}*/\n}\n.work-main .board > div > .main > .add-comment p .zanActive {\n  color: #4385F5;\n}\n.work-main .board > div > .main > .add-comment p .zanActive > i {\n  color: #4385F5;\n}\n.work-main .board > div > .main > .add-comment > div {\n  width: 100%;\n  padding: 10px 30px;\n  background: #F1F4F4;\n  box-sizing: border-box;\n}\n.work-main .board > div > .main > .add-comment > div > .text-input,\n.work-main .board > div > .main > .add-comment > div > .text-input.active {\n  width: 100%;\n  min-height: 60px;\n  max-height: 300px;\n  margin-top: 10px;\n  border: 1px solid #ccc;\n}\n.work-main .board > div > .main > .add-comment > div > .text-input > textarea,\n.work-main .board > div > .main > .add-comment > div > .text-input.active > textarea {\n  padding: 10px;\n  color: #666;\n}\n.work-main .board > div > .main > .add-comment > div {\n  text-align: right;\n  padding-bottom: 10px;\n}\n.work-main .board > div > .main > .add-comment > div.anniu {\n  display: block;\n  width: 60px;\n  height: 28px;\n  margin-bottom: 10px;\n  border-radius: 6px;\n  background-color: #4385f4;\n  font-size: 14px;\n  cursor: pointer;\n}\n</style><div class=\"message\" ng-mousedown=\"hideALists()\">\n    <text-input multi-line=\"true\"\n                ng-class=\"{'hasfocus':message.hasfocus}\"\n                placeholder=\"\u4eca\u5929\u60f3\u5bf9\u4f60\u52aa\u529b\u7684\u4e00\u5929\u8bf4\u70b9\u4ec0\u4e48\u5462\"\n                ng-model=\"message.text\" autoheight=\"240\"\n                ng-blur=\"blurAll()\"\n                ng-focus=\"message.hasfocus = true\" ></text-input>\n    <div class=\"options\" ng-if=\"message.hasfocus\" ng-mousedown=\"$event.preventDefault();\">\n        <anniu icon=\"images/png/tp.png\" color=\"#4385f5\" hover-color=\"#468aff\" active-color=\"#3e7be3\" class=\"file white\" ng-click=\"images.ing = 1\">\n            \u56fe\u7247<span ng-if=\"images.imgcount\">({{images.imgcount-images.imgwait}}/{{images.imgcount}})</span>\n        </anniu>\n        <anniu icon=\"images/png/wj.png\" color=\"#f29839\" hover-color=\"#ffa03c\" active-color=\"#dd8b34\" class=\"file white\" ng-click=\"images.ing = 2\">\n            \u6587\u6863<span ng-if=\"images.length-images.imgcount\">({{images.length-images.imgcount-images.filewait+images.imgwait}}/{{images.length-images.imgcount}})</span>\n        </anniu>\n        <div class=\"text\" >\u53ef\u89c1\u8303\u56f4\uff1a</div>\n        <div class=\"switch\" ng-class=\"{'open':showALists.ing}\">\n            <span>\n                <span ng-bind=\"active_aList\">\u516c\u5f00</span>\n                <span ng-if=\"message.recievegw.length\">({{message.recievegw.length===1?message.recievegw[0].name:message.recievegw.length}})</span>\n            </span>\n            <input ng-click=\"showALists();\"/>\n            <div class=\"opts\" ng-if=\"showALists.ing\">\n                <div ng-repeat=\"(name,a) in aLists\" ng-mousedown=\"activeAList(name);\"><img ng-src=\"{{a.path}}\"><span ng-bind=\"name\"></span></div>\n            </div>\n        </div>\n        <anniu ng-click=\"sendMessage()\">\u53d1\u5e03</anniu>\n\n    </div>\n    <div class=\"file-container\" ng-if=\"images.ing\" ng-class=\"'t'+images.ing\" ng-mousedown=\"$event.preventDefault()\">\n        <p>\u4e0a\u4f20{{[\"\u56fe\u7247\",\"\u6587\u4ef6\"][images.ing-1]}}<i ng-click=\"images.ing = false;\"></i></p>\n        <p class=\"tips\">\u62d6\u62fd\u6587\u4ef6\u5230\u8fd9\u91cc\u6216\u70b9\u51fb\u4e0b\u9762\u7684\u6309\u94ae<br>\u6700\u591a\u53ea\u80fd\u4e0a\u4f20{{[0,\"9\u5f20\",\"4\u4e2a\"][images.ing]}}</p>\n        <div ng-repeat=\"img in images\"\n             ng-class=\"{'ing':img.ing,'err':img.error,'cancel':img.showcancel}\"\n             ng-if=\"images.ing-1-($index>=images.imgcount)===0\">\n            <img ng-if=\"img.isimg\" ng-src=\"{{img.src}}\">\n            <span ng-show=\"img.showcancel||!img.isimg\">\n                <span ng-if=\"img.ing\">({{img.xhr.up_loaded|size}}/{{img.xhr.up_total|size}})\uff1a</span>\n                {{img.name}}\n                <span ng-if=\"!img.ing\">&nbsp;-&nbsp;{{img.size|size}}</span>\n            </span>\n            <a class=\"uploader\" ng-show=\"img.ing\"><b ng-style=\"{'width':img.xhr.up_scale*100+'%'}\"></b></a>\n            <i ng-click=\"showcancel(img,$index,images);\">\u2573</i>\n        </div>\n        <p class=\"upload-btn\" ng-click=\"getfile()\" ng-if='[images.imgcount<9,images.length-images.imgcount<4][images.ing-1]'>\n            <i class=\"fa fa-plus\"></i>\n        </p>\n    </div>\n</div>\n<!--<div style=\"background-color: #f2f4f9;width:100%;height:10px;position: absolute;left:0;\"></div>-->\n<div class=\"tabs\">\n    <div ng-class=\"{'open':active_menu === label}\" ng-repeat=\"(label,menu) in menus\" ng-click=\"active(label)\"><span ng-bind=\"label\"></span></div>\n</div>\n<div class=\"board\">\n    <div ng-repeat=\"msg in messages\" scroll-page=\"msgRequest\">\n        <div class=\"title\" >\n            <div class=\"man\" ng-mouseleave=\"hideCard(msg)\">\n                <div class=\"avatar\" ng-style=\"{'backgroundImage':'url(\\'' + (msg.userurl || 'images/avatar.png') + '\\')'}\" ng-mouseover=\"displayCard(msg)\"></div>\n                <div class=\"card\" ng-show=\"msg.xscard?true:false\">\n                \t<div class=\"card-top\">\n                \t\t<div class=\"card-avatar\" ng-style=\"{'backgroundImage':'url(\\'' + (msg.userurl || 'images/avatar.png') + '\\')'}\"></div>                \t\t                \t\n\t                \t<div class=\"card-inf\">\n\t                \t\t<p class=\"card-user\" ng-bind=\"msg.username\"></p>\n\t                \t\t<p class=\"card-gs\" ng-bind=\"msg.ssgsname\"></p>\n\t                \t\t<p class=\"card-jtinf\">\u5c97\u4f4d\uff1a<span ng-bind=\"msg.gwname\"></span></p>\n\t                \t\t<p class=\"card-jtinf\">\u7535\u8bdd\uff1a<span ng-bind=\"msg.phone\"></span></p>\t                \t\t\n\t                \t</div>\n                \t</div>                \t\n                \t<div class=\"card-bottom\">\n                \t\t<a class=\"concern\" ng-click=\"isconcern(msg)\">\n\t                \t\t<img ng-src=\"images/gz_1.png\" ng-if=\"msg.gzStatus==1\"/>\n\t                \t\t<img ng-src=\"images/gz_2.png\" ng-if=\"msg.gzStatus==0\"/>\n\t                \t\t<span ng-bind=\"msg.gzStatus==1? '\u53d6\u6d88\u5173\u6ce8': '\u5173\u6ce8'\"></span>\n\t                \t</a>\n                \t</div>\n                </div>\n                <div class=\"time\" ng-bind=\"msg.zdrq\"></div>\n                <span ng-bind=\"msg.username\"></span>\n                <span class=\"label\" ng-bind=\"msg.ssgsname\"></span>\n                <span class=\"label\" ng-bind=\"msg.gwname\"></span>\n            </div>\n            <img ng-if=\"msg.sortid\" ng-src=\"images/zd.png\"/>\n            <div>\n                <i class=\"iconfont icon-iconjiantouxia\" ng-class=\"{newsControlActive:newsoperat.isshow}\"></i>\n                <input type=\"text\" readonly=\"readonly\" ng-click=\"showControl(msg)\" ng-blur=\"hideControl(msg)\"/>\n                <div ng-if=\"msg.isshow\" ng-mousedown=\"$event.preventDefault()\">\n                    <!--<p ng-click=\"setTop(msg); hideControl(msg)\" ng-init=\"\" ng-bind=\"msg.sortid?'\u53d6\u6d88\u7f6e\u9876':'\u7f6e\u9876'\"></p>-->\n                    <p ng-click=\"removeMsg(msg, $index); hideControl(msg)\">\u5220\u9664</p>\n                </div>\n            </div>\n        </div>\n        <div class=\"main\">\n            <div class=\"msg\" ng-bind=\"msg.msgcontent\"></div>\n            <div class=\"images\" ng-if=\"msg.picList.length\">\n                <div ng-repeat=\"img in msg.picList\" ng-style=\"{'backgroundImage':'url(\\'' + genpic(img.url) + '\\')'}\" ng-click=\"albumBrowse(msg.picList, $index)\"></div>\n            </div>\n            <div class=\"files\" ng-if=\"msg.fileList.length\">\n                <a ng-repeat=\"file in msg.fileList\" ng-href=\"{{file.url}}\" download=\"{{file.originName}}\">\n            \t\t<img ng-src={{\"images/\"+file.extend+\".png\"}}><span ng-bind=\"file.originName\"></span>\n            \t</a>\n            </div>\n            <div class=\"add-comment\">\n                <p>\n                    <span></span>\n                    <span ng-click=\"zan(msg)\" ng-class=\"{zanActive:msg.agree}\">\n                        <i class=\"iconfont icon-iconfontpraise\" aria-hidden=\"true\"  ng-class=\"{zanActive:msg.iszan}\"></i>\n                        <span >\u8d5e({{msg.agreenum}})</span>\n                    </span>\n                    <em ng-show=\"msg.iszan\" ng-class=\"{zanActive:msg.iszan}\">1</em>\n                    <span ng-click=\"collect(msg)\" >{{msg.sc?\"\u53d6\u6d88\u6536\u85cf\":\"\u6536\u85cf\"}}</span>\n                    <span ng-click=\"msg.isreplay = msg.isreplay?false:true\" ng-class=\"{'select':msg.isreplay}\">\u8bc4\u8bba</span>\n                </p>\n                <div ng-show=\"msg.isreplay\">\n                    <text-input ng-model=\"msg.replyTxt\" multi-line=\"true\" placeholder=\"\u8bf4\u70b9\u4ec0\u4e48\u5427\" autoheight=\"300\"></text-input>\n                    <anniu ng-click='replyMessage(msg, $index)'>\u56de\u590d</anniu>\n                </div>\n                <!---->\n            </div>\n            <div class=\"comment\" ng-repeat=\"rpl in msg.replyList\" ng-if=\"$index<3||msg.showmore\" ng-init=\"rpl.replayAndDel=0\" ng-mouseover=\"rpl.replayAndDel=1\" ng-mouseleave=\"rpl.replayAndDel=0\">\n                <div class=\"man\" ng-mouseleave=\"hideCard(rpl)\">\n                    <div class=\"avatar\" ng-style=\"{'backgroundImage':'url(\\'' + (rpl.userurl || 'images/avatar.png') + '\\')'}\" ng-mouseover=\"displayCard(msg,rpl)\"></div>\n\t                <div class=\"card\" ng-show=\"rpl.xscard?true:false\">\n\t                \t<div class=\"card-top\">\n\t\t                \t<div class=\"card-avatar\" ng-style=\"{'backgroundImage':'url(\\'' + (rpl.userurl || 'images/avatar.png') + '\\')'}\"></div>\t\t                \t               \t\n\t\t                \t<div class=\"card-inf\">\n\t\t                \t\t<p class=\"card-user\" ng-bind=\"rpl.username\"></p>\n\t\t                \t\t<p class=\"card-gs\" ng-bind=\"rpl.ssgsname\"></p>\n\t\t                \t\t<p class=\"card-jtinf\">\u5c97\u4f4d\uff1a<span ng-bind=\"msg.gwname\"></span></p>\n\t\t                \t\t<p class=\"card-jtinf\">\u7535\u8bdd\uff1a<span ng-bind=\"rpl.phone\"></span></p>\n\t\t                \t</div>\n\t                \t</div>\n\t                \t<div class=\"card-bottom\">\n\t                \t\t<a class=\"concern\" ng-click=\"isconcern(rpl)\">\n\t\t                \t\t<img ng-src=\"images/gz_1.png\" ng-if=\"rpl.gzStatus==1\"/>\n\t\t                \t\t<img ng-src=\"images/gz_2.png\" ng-if=\"rpl.gzStatus==0\"/>\n\t\t                \t\t<span ng-bind=\"rpl.gzStatus==1? '\u53d6\u6d88\u5173\u6ce8': '\u5173\u6ce8'\"></span>\n\t\t                \t</a>\n                \t\t</div>\n\t                </div>\n                    <div class=\"message\">\n\t                \t<p data-name=\"{{rpl.username+' : '}}\">{{rpl.content}}</p>\n\t                \t<p>\n\t                \t\t<span ng-bind=\"rpl.hfrq\"></span>\n\t                \t\t<span ng-show=\"rpl.replayAndDel\" ng-click=\"replyComment(msg,rpl.username)\">\u56de\u590d</span>\n\t                \t\t<span ng-show=\"rpl.replayAndDel\" ng-click=\"removeReply(rpl, msg)\">\u5220\u9664</span>\n\t                \t</p>\n\t                </div>\n<!--                    <span class=\"label\" ng-bind=\"rpl.ssgsname\"></span>\n                    <span class=\"label\" ng-bind=\"rpl.gwname\"></span>-->\n                </div>\n                \n            </div>\n            <p ng-click=\"msg.showmore=!msg.showmore\" ng-if=\"msg.replyList.length>3\">{{msg.showmore?\"\u6536\u8d77\u5168\u90e8\u8bc4\u8bba>>\"+\"(\"+msg.replyList.length+\")\":\"\u5c55\u5f00\u5168\u90e8\u8bc4\u8bba>>\"+\"(\"+msg.replyList.length+\")\"}}</p>\n        </div>\n    </div>\n</div>\n<paginator pagesize=\"{{pagesize}}\" total=\"{{total}}\" messages=\"messages\" ng-if=\"messages.length>pagesize\"></paginator>\n"}