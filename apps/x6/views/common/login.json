{"controller":" [\"$scope\", \"user\", \"api\", \"cache\", \"alert\", \"views\", function ($scope, user, api, cache, alert, views) {\n    //\u767b\u5f55\u9875\u9762\u8981\u4e09\u4e2a:\u6ce8\u518c\uff0c\u767b\u5f55\uff08\u9ed8\u8ba4\uff09\uff0c\u5fd8\u8bb0\u5bc6\u7801\n    //\n    //\u767b\u5f55\u903b\u8f91\n    //\u786e\u5b9a\u8981\u663e\u793a\u54ea\u4e2a\u9875\u9762\n    var form=function(name){\n        if(name){\n            form.ing=name;\n        }else{\n            return form.ing;\n        }\n    };\n    form('login');\n    $scope.form=form;\n    $scope.params={};\n    $scope.login=api.adapt($scope.params, {\n        _phone: ['\u624b\u673a\u53f7\u7801', function (value) {\n                if (value[0] !== \"1\") {\n                    return \"\u5f00\u5934\u53ea\u80fd\u662f1\";\n                }\n                if (value.length < 11) {\n                    return \"\u4e0d\u523011\u4f4d\";\n                }\n                if (value.length > 11) {\n                    return \"\u8d85\u51fa11\u4f4d\";\n                }\n                return !/^(1\\d{10})$/.test(value) && \"\u53ea\u80fd\u8f93\u5165\u6570\u5b57\";\n            }, $scope.phone],\n        _pwd: ['\u5bc6\u7801', function () {\n                return false;\n            }],\n        _clientType: ['\u524d\u7aef\u7c7b\u578b', function () {\n            }, \"pc\"]\n    }, \"/x6/login.do\", \"\u767b\u5f55\").onsuccess(function (result) {\n        user.login(result);\n        cache.refresh();\n    }).onpost(function (p) {\n        $scope.phone=$scope.params.phone;\n        $scope.$Save(\"phone\").local();\n//        return;\n        var test_users = {\n            \"15312171310+123456\": {\n                id: \"001\",\n                name: \"\u738b\u52c7\u6167\",\n                role: \"WEB Developer\",\n                avatar: \"images/man.png\",\n                tokenid:'001:gsdm',\n                url:'localhost',\n                telephone: '15312171310'\n            },\n            \"13460670634+123456\": {\n                id: \"002\",\n                name: \"\u5b89\u5f92\u751f\",\n                role: \"Tester\",\n                tokenid:'002:gsdm',\n                url:'localhost',\n                avatar: \"images/tx.png\",\n                telephone: '15312171310'\n            }\n        };\n        var _user = test_users[p.phone + \"+\" + p.pwd];\n        if (_user) {\n            user(_user);\n        } else {\n            alert.warn(\"\u7528\u6237\u540d\u6216\u5bc6\u7801\u4e0d\u6b63\u786e\uff01\");\n        }\n        return false;\n    });\n    $scope.phone_confirm = function (event) {\n        var tmp=event.target;\n        var $=angular.element;\n        while(tmp){\n            if($(tmp).hasClass(\"field\")){\n                tmp.nextElementSibling.getElementsByTagName(\"input\")[0].focus();\n                return;\n            }\n            tmp=tmp.parentNode;\n        }\n    };\n}]","template":"<style>.common-login {\n  background-color: inherit;\n}\n.common-login .noscroll-content {\n  padding-top: 6%;\n  background-size: cover;\n  background-image: url(images/pictures/login_bg.jpg);\n  font-size: 14px;\n  height: 100%;\n}\n.common-login a {\n  color: #3399cc;\n  outline: none;\n  cursor: pointer;\n}\n.common-login a:hover {\n  text-decoration: underline;\n}\n.common-login .form {\n  width: 500px;\n  padding: 35px 40px;\n  text-align: center;\n  border-bottom-right-radius: 3px;\n  border-bottom-left-radius: 3px;\n  background: url(images/single/login_form.png) center center repeat;\n  -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);\n  -moz-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);\n  z-index: 9;\n  border-radius: 5px;\n  position: relative;\n  position: absolute;\n  left: 50%;\n  margin-left: -250px;\n}\n.common-login .title {\n  font-size: 26px;\n  font-weight: normal;\n  color: #3d5266;\n  padding-bottom: 38px;\n}\n.common-login .field {\n  width: 100%;\n  margin-bottom: 20px;\n}\n.common-login .text-input {\n  width: 100%;\n  height: 40px;\n  line-height: 24px;\n  border: 1px solid #cfdae6;\n  border-radius: 100px;\n  background: #fff;\n  position: relative;\n  font-size: 16px;\n}\n.common-login .text-input.focus {\n  border: 1px solid #00aaef;\n}\n.common-login .text-input.hlf {\n  padding-left: 20px;\n}\n.common-login .text-input.hlf > input,\n.common-login .text-input.hlf > .hld {\n  left: 0;\n  width: 70%;\n  text-align: left;\n}\n.common-login .text-input > input,\n.common-login .text-input > .hld {\n  padding: 0 30px;\n}\n.common-login .anniu {\n  font-size: 20px;\n  line-height: 40px;\n  width: 100%;\n  height: 40px;\n  color: #fff;\n  border-radius: 100px;\n  background: #00aaef;\n}\n.common-login .help {\n  margin: 18px 0 8px 0;\n}\n</style>\n<div class=\"form bouncy-scale-in\" ng-if=\"form() === 'login'\">\n    <div class=\"title\">\n        \u6b22\u8fce\u767b\u5f55x6\n    </div>\n    <field nolabel><text-input onconfirm='phone_confirm($event)' placeholder=\"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\" class=\"autofocus\" ng-model=\"params.phone\"></text-input></field>\n    <field nolabel>\n        <text-input onconfirm='login()' placeholder=\"\u8bf7\u8f93\u5165\u5bc6\u7801\" type=\"password\" class=\"hlf\" ng-model=\"params.pwd\"></text-input>\n        <a style=\"position: absolute;right:10px;font-size: 16px;width: 30%;text-align: center;top:0;line-height: 40px;\" ng-click=\"form('fogot')\">\u5fd8\u8bb0\u5bc6\u7801\uff1f</a>\n    </field>\n    <anniu ng-api=\"login\" ng-click=\"login()\">{{login.ing?\"\u6b63\u5728\u767b\u5f55\":\"\u767b\u5f55\"}}</anniu>\n    <div class=\"help\">\n        \u6ca1\u6709\u8d26\u53f7?\n        <a ng-click=\"form('register')\">\u514d\u8d39\u6ce8\u518c</a>\n    </div>\n</div>\n\n\n<div class=\"form bouncy-scale-in\" ng-if=\"form() === 'register'\">\n    <div class=\"title\">\n        \u6b22\u8fce\u6ce8\u518cx6\n    </div>\n    <field nolabel><text-input onconfirm='phone_confirm($event)' placeholder=\"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\" class=\"autofocus\" ng-model=\"params.phone\"></text-input></field>\n    <field nolabel style=\"margin-bottom: 0;\"><text-input onconfirm='login()' placeholder=\"\u8bf7\u8f93\u5165\u8bc6\u522b\u7801\uff0c\u70b9\u51fb\u56fe\u7247\u53ef\u5217\u6362\" class=\"hlf\" type=\"password\" ng-model=\"params.img_text\"></text-input></field>\n    <div class=\"help\">\n        \u60a8\u662f\u5426\u540c\u610f\u63a5\u53d7<a>\u300ax6\u4f7f\u7528\u6761\u6b3e\u300b</a>\n    </div>\n    <anniu ng-api=\"login\" >\u540c\u610f\uff0c\u4e0b\u4e00\u6b65</anniu>\n    <div class=\"help\">\n        \u5df2\u6709\u8d26\u53f7?\u76f4\u63a5<a ng-click=\"form('login')\">\u767b\u5f55</a>\n    </div>\n</div>\n\n\n<div class=\"form bouncy-scale-in\" ng-if=\"form() === 'fogot'\">\n    <div class=\"title\">\n        \u627e\u56de\u5bc6\u7801\n    </div>\n    <text-input onconfirm='phone_confirm($event)' placeholder=\"\u8bf7\u8f93\u5165\u7528\u6237\u540d\" class=\"autofocus\" ng-model=\"params.phone\"></text-input>\n    <text-input onconfirm='login()' placeholder=\"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801\" type=\"password\" class=\"hlf\" ng-model=\"params.code\"></text-input>\n    <div class=\"help\">\n        \u5982\u679c\u957f\u65f6\u95f4\u6ca1\u6709\u6536\u5230\u9a8c\u8bc1\u7801\uff0c\u8bf7<a>\u67e5\u770b\u5e2e\u52a9</a>\n    </div>\n    <anniu ng-api=\"login\" >{{login.ing?\"\u6b63\u5728\u9a8c\u8bc1\":\"\u9a8c\u8bc1\u8eab\u4efd\"}}</anniu>\n    <div class=\"help\">\n        \u60f3\u8d77\u5bc6\u7801\uff1f<a ng-click=\"form('login')\">\u76f4\u63a5\u767b\u5f55</a>\n        \u6ca1\u6709\u8d26\u53f7\uff1f\u514d\u8d39<a ng-click=\"form('register')\">\u6ce8\u518c</a>\n    </div>\n</div>\n"}